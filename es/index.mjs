import{_ as _toConsumableArray,a as _asyncToGenerator,b as __generator,c as _slicedToArray,d as _inherits,e as _createSuper,f as _classCallCheck,g as _assertThisInitialized,h as _wrapNativeSuper,i as _objectSpread,j as _objectSpreadProps}from"./89c27c69.esm.es5.production.mjs";function createEnum(n){var e=_toConsumableArray(n);return n.forEach(function(n){e[n.key]=n.value}),e.pick=function(e){return n.find(function(n){return n.key===e||n.value===e})},e.pickLabel=function(n){var t;return null===(t=e.pick(n))||void 0===t?void 0:t.label},e.pickValue=function(n){var t;return null===(t=e.pick(n))||void 0===t?void 0:t.value},e.pickKey=function(n){var t;return null===(t=e.pick(n))||void 0===t?void 0:t.key},e}var showLoading=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"请稍候",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(t=Object.assign({},{hasMask:!1,maskColor:"#00000070",onCancel:null,cancelInline:!1,id:"com_global_page_loading"},t)).id,o=t.hasMask,a=t.maskColor,c=t.onCancel,i=t.cancelInline,s="_".concat(r,"_timeout");window[s]&&clearTimeout(window[s]);var l=document.getElementById(r);l||((l=document.createElement("div")).id=r,l.className=r,document.body.append(l));var u="".concat(r,"_style");if(!document.getElementById(u)){var d=document.createElement("style");d.id=u,d.innerHTML="\n		.".concat(r," {\n			position: fixed;\n			left: 0;\n			top: 0;\n			width: 100vw;\n			height: 100vh;\n			display: flex;\n			justify-content: center;\n			align-items: center;\n			pointer-events: none;\n			z-index: 10000;\n		}\n		.").concat(r,".show-mask {\n			pointer-events: unset;\n			background: #00000070;\n		}\n		.").concat(r," .mask-wrapper {\n			position: fixed;\n		}\n		.").concat(r," .loading-wrapper {\n			width: 120px;\n			height: 120px;\n			z-index: 8000;\n			background: rgba(0, 0, 0, 0.6);\n			border-radius: 8px;\n			text-align: center;\n			color: white;\n			display: flex;\n			justify-content: center;\n			flex-direction: column;\n			align-items: center;\n			pointer-events: initial;\n			line-height: 1.3;\n		}\n		.").concat(r," .loading-wrapper img {\n			width: 50px;\n			height: 50px;\n			margin-bottom: 10px;\n		}\n		.").concat(r," .loading-wrapper a {\n			color: #6ab2ff;\n		}"),document.head.appendChild(d)}if(l.innerHTML='\n		<div class="loading-wrapper">\n			<img src="https://img.alicdn.com/tfs/TB1bnUsQBLoK1RjSZFuXXXn0XXa-32-32.svg" alt="加载中">\n			<div>\n				<span>'.concat(n,"</span>\n				").concat(i?"":"<br />","\n				").concat(c?'<a href="javascript:;" class="cancel">取消</a>':"","\n			</div>\n		</div>"),c){var f=l.querySelector(".cancel");f&&f.addEventListener("click",function(){hideLoading(),c()})}l.addEventListener("click",function(){hideLoading()}),l.style.display="flex",l.style.background=o?a:"transparent",l.className="".concat(r," ").concat(o?"show-mask":""),e>0&&(window[s]=setTimeout(function(){hideLoading()},1e3*e))},hideLoading=function(){var n="com_global_page_loading",e=document.getElementById(n);e&&(e.style.display="none")};function initWindowMessage(n,e){e||window===window.parent||(e=window.parent),!e&&window.opener&&(e=window.opener);var t=new Map,r=new Map,o=function(){return Math.random().toString(36).substring(2)},a={},c="_local_function_";function i(n){var e="".concat(c).concat(o());return a[e]=n,e}var s=function(n,e){return(null==n?void 0:n.map(function(n){if("object"==typeof n)for(var t in n)n[t]=e(n[t]);return e(n)}))||[]};function l(r){for(var a=arguments.length,c=Array(a>1?a-1:0),l=1;l<a;l++)c[l-1]=arguments[l];if(!e){console.warn("TargetWindow is null.");return}return new Promise(function(a,l){var u=o();t.set(u,{resolve:a,reject:l}),e.postMessage({scene:n,type:"event",eventName:r,payload:s(c,function(n){return"function"==typeof n?i(n):n}),callbackId:u},"*")})}function u(n,e){r.has(n)||r.set(n,[]),r.get(n).push(e)}return window.addEventListener("message",function(){var o=_asyncToGenerator(function(o){var a,i,u,d,f,p,v,g,h,m,y,w,b;return __generator(this,function(M){switch(M.label){case 0:if(!o.data||o.data.scene!==n)return[2];if(e=o.source,i=(a=o.data).type,u=a.eventName,d=a.payload,f=a.callbackId,"event"!==i)return[3,6];p=s(d,function(n){if("string"==typeof n&&n.startsWith(c)){var e="getFn_".concat(n);return function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return l.apply(void 0,["executeLocalFunction",e].concat(_toConsumableArray(t)))}}return n}),v=r.get(u)||[],g=r.get("*")||[],M.label=1;case 1:return M.trys.push([1,4,,5]),[4,Promise.all(v.map(function(n){return Promise.resolve(n.apply(void 0,_toConsumableArray(p)))}))];case 2:return h=M.sent(),[4,Promise.all(g.map(function(n){return Promise.resolve(n.apply(void 0,[u].concat(_toConsumableArray(p))))}))];case 3:if(m=M.sent(),f){if(y=h[h.length-1]||m[m.length-1],!v.length&&!y)return[2];e.postMessage({scene:n,type:"callback",callbackId:f,payload:y},"*")}return[3,5];case 4:return console.error(w=M.sent()),f&&e.postMessage({scene:n,type:"callback",callbackId:f,error:w||"unknown error"},"*"),[3,5];case 5:return[3,7];case 6:"callback"===i&&f&&(b=t.get(f))&&(o.data.error?b.reject(o.data.error):b.resolve(o.data.payload),t.delete(f)),M.label=7;case 7:return[2]}})});return function(n){return o.apply(this,arguments)}}()),u("executeLocalFunction",function(n){for(var e,t=arguments.length,r=Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];if(!a[n=(null==n?void 0:n.replace("getFn_",""))||""])throw Error("未找到本地缓存方法：".concat(n));return(e=a)[n].apply(e,_toConsumableArray(r))}),l("auto-connect"),{postMessage:l,onMessage:u}}var deepCopy=function(n){return n&&"object"==typeof n?JSON.parse(JSON.stringify(n)):n},encodeHtml=function(n){if("string"==typeof n){var e=document.createElement("div");return e.innerText=n,e.innerHTML}if("object"==typeof n&&n)for(var t in n)n[t]=encodeHtml(n[t]);return n},decodeHtml=function(n){if("string"==typeof n){var e=document.createElement("div");return e.innerHTML=n,e.innerText}if("object"==typeof n&&n)for(var t in n)n[t]=decodeHtml(n[t]);return n},copyToClipboard=function(n,e,t){if(!n)throw Error("text can not be empty.");return(e=e||function(n){return console.error("复制到剪贴板失败：".concat(n||""))},navigator.clipboard&&!t)?navigator.clipboard.writeText(n).catch(function(n){throw e(n.message),n}):new Promise(function(t,r){var o=document.createElement("input");o.value=n,o.style.cssText="position:fixed;left:0;top:0;opacity:0;",document.body.appendChild(o),o.select();try{if(document.execCommand("copy"))t();else{var a="Failed to execute 'document.execCommand'.";e(a),r(Error(a))}}catch(n){e(n.message),r(n)}finally{document.body.removeChild(o)}})},getIdCardLastChar=function(n){if(!n||n.length<17)throw Error("传入的身份证号长度必须>=17");for(var e=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],t=["1","0","X","9","8","7","6","5","4","3","2"],r=0,o=0;o<17;o++)r+=parseInt(n.charAt(o),10)*e[o];return t[r%11]},validateIdCard=function(n){return n&&18===n.length?"".concat(getIdCardLastChar(n))===n.charAt(17):(console.error("身份证号不是18位！"),!1)},keyCodes=function(){for(var n={backspace:8,tab:9,clear:12,enter:13,shift:16,ctrl:17,alt:18,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46},e=48;e<=57;e++)n[String.fromCharCode(e)]=e;for(var t=65;t<=90;t++)n[String.fromCharCode(t).toLowerCase()]=t;for(var r=96;r<=105;r++)n["num".concat(r-96)]=r;for(var o=112;o<=123;o++)n["f".concat(o-111)]=o;return n}(),getParam=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.search;return(RegExp("(^|\\?|&)".concat(n,"=(.*?)(?=&|#|$)"),"g").exec(e)||[])[2]},getParamInt=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.search;return parseInt(getParam(n,e)||"0",10)},getParams=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.search,e=((n||"").split("?").pop()||"").split("#")[0]||"",t={};return e.split("&").map(function(n){return n.split("=")}).forEach(function(n){var e=_slicedToArray(n,2),r=e[0],o=e[1];t[r]=o||""}),t},setParam=function(n,e,t){if(void 0!==getParam(n,t=t||"".concat(location.pathname).concat(location.search)))return t.replace(RegExp("(^|\\?|&)".concat(n,"=(.*?)(?=&|#|$)"),"g"),"$1".concat(n,"=").concat(e));var r=_slicedToArray(t.split("#"),2),o=r[0],a=r[1];return"".concat(o).concat(0>o.indexOf("?")?"?":"&").concat(n,"=").concat(e).concat(a?"#":"").concat(a||"")},delParam=function(n,e){return(e=e||"".concat(location.pathname).concat(location.search)).replace(RegExp("(^|\\?|&)".concat(n,"=.*?(&|#|$)"),"g"),function(n,e,t){return"&"===t?e:t})},toUrlParams=function(n){return Object.keys(n||{}).filter(function(e){return void 0!==n[e]}).map(function(e){var t="object"==typeof n[e]?JSON.stringify(n[e]):n[e];return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t))}).join("&")},mergeOptions=function(n,e){var t=Object.assign({},(null==n?void 0:n.headers)||{},(null==e?void 0:e.headers)||{}),r=Object.assign({},(null==n?void 0:n.fetchOptions)||{},(null==e?void 0:e.fetchOptions)||{});return Object.assign({},n||{},e||{},{headers:t,fetchOptions:r})},MyError=function(n){_inherits(t,n);var e=_createSuper(t);function t(n,r){var o;return _classCallCheck(this,t),o=e.call(this,n),Object.assign(_assertThisInitialized(o),r||{}),o}return t}(_wrapNativeSuper(Error)),request=function(){var n=_asyncToGenerator(function(n,e){var t,r,o,a,c,i,s,l,u,d,f,p,v,g,h,m,y,w,b,M,x,k,E,j,C,O,H;return __generator(this,function(S){switch(S.label){case 0:if(t={errorMessage:"系统繁忙，请稍后再试",errorHandler:function(n){if(!(null==e?void 0:e.silent)&&n){var t;null==e||null===(t=e.toastHandler)||void 0===t||t.call(e,n)}throw Error(n)},baseUrl:"",headers:{},fetchOptions:{credentials:"include"},checkSuccess:function(n){return(null==n?void 0:n.code)==0||(null==n?void 0:n.code)==200},toastHandler:function(n){return console.error("[您还没有配置toastHandler，请根据您的UI组件库配置合适的提示方法] ".concat(n||""))},onFetchResponse:function(n){if(200===n.status)return n.json();throw new MyError(n.statusText,{response:_objectSpreadProps(_objectSpread({},n),{code:n.status,message:n.statusText,isHttpResponse:!0})})}},o=(r=(e=mergeOptions(t,e))||{}).params,a=r.data,c=r.formData,i=r.json,s=r.method,l=r.headers,u=r.baseUrl,d=r.fetchOptions,f=r.checkSuccess,p=r.afterRequest,v=r.errorHandler,g=r.errorMessage,h=r.responseConverter,m=r.onFetchResponse,y=r.setLoading,w=r.overrideMessage,b=(null==e?void 0:e.defaultErrorMessage)||g,d.headers=_objectSpread({},l||{},d.headers||{}),o&&(d.method=s||"GET",n="".concat(n).concat(n.indexOf("?")>=0?"&":"?").concat(toUrlParams(o))),a)Object.assign(d,{method:s||"POST",body:toUrlParams(a),headers:_objectSpread({"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"},d.headers||{})});else if(c){if(M=c,!(c instanceof FormData))for(var T in M=new FormData,c)M.append(T,c[T]);Object.assign(d,{method:s||"POST",body:M})}else i&&Object.assign(d,{method:s||"POST",body:JSON.stringify(i),headers:_objectSpread({"Content-Type":"application/json;charset=utf-8"},d.headers||{})});x=null,null==y||y(!0),S.label=1;case 1:return S.trys.push([1,3,,4]),0===(k="".concat(/^(http|\/\/)/g.test(n)?"":u||"").concat(n)).indexOf("//")&&"blob:"===location.protocol&&(k="".concat(null===(E=location.pathname.split(":"))||void 0===E?void 0:E[0],":").concat(k)),[4,fetch(k,d).then(m)];case 2:return x=S.sent(),[3,4];case 3:return console.error(j=S.sent()),null==y||y(!1),null==p||p(!1,j.response),O="function"==typeof w?w(j.response):w,null==v||v(null!=O?O:(null===(C=j.response)||void 0===C?void 0:C.message)||b,j.response,e),[2,void 0];case 4:if(null==y||y(!1),x=h?h(x):x,null==f?void 0:f(x))return null==p||p(!0,x),[2,x.data];return null==p||p(!1,x),H="function"==typeof w?w(x):w,null==v||v(null!=H?H:x.message||b,x,e),[2,void 0]}})});return function(e,t){return n.apply(this,arguments)}}(),create=function(n){var e=mergeOptions(this.overrideDefaultOptions,n),t=function(n,t){return request(n,mergeOptions(e,t))};return t.overrideDefaultOptions=e,t.create=create.bind(t),t};request.create=create.bind(request);var Request=function(n,e){var t=e;return e||(t=n,n=request),function(e,r){return n(e,_objectSpread({},t||{},r||{}))}},formatDate=function(n,e){var t=function(n){e=e.replace(RegExp("".concat(n,"+"),"g"),function(e){var t="".concat(r[n]);if("w"===n)return"".concat(e.length>2?"星期":"周").concat(o[t]);for(var a=0,c=t.length;a<e.length-c;a++)t="0".concat(t);return 1===e.length?t:t.substring(t.length-e.length)})};if(!n)return"";if("number"==typeof n)n=new Date(n);else if("string"==typeof n){if(/^\d{12,13}$/g.test(n))n=new Date(parseInt(n,10));else{if(!/^.{10}T.{8,12}Z?$/g.test(n))return n;n=new Date(n)}}if(!(n instanceof Date))throw Error("formatDate error: not date.");if(isNaN(null==n?void 0:n.getFullYear()))throw Error("formatDate error: invalid date.");e=e||"yyyy-MM-dd HH:mm:ss";var r={y:n.getFullYear(),M:n.getMonth()+1,d:n.getDate(),q:Math.floor((n.getMonth()+3)/3),w:n.getDay(),H:n.getHours(),h:n.getHours()%12==0?12:n.getHours()%12,m:n.getMinutes(),s:n.getSeconds(),S:n.getMilliseconds()},o=["天","一","二","三","四","五","六"];for(var a in r)t(a);return e},parseDate=function(n,e){var t={y:0,M:1,d:0,H:0,h:0,m:0,s:0,S:0};(e=e||"yyyy-MM-dd").replace(/([^yMdHmsS]*?)(([yMdHmsS])\3*)([^yMdHmsS]*?)/g,function(e,r,o,a,c){return n=n.replace(RegExp("".concat(r,"(\\d{").concat(o.length,"})").concat(c)),function(n,e){return t[a]=parseInt(e,10),""}),""}),t.M--;var r=new Date(t.y,t.M,t.d,t.H,t.m,t.s);return 0!==t.S&&r.setMilliseconds(t.S),r},sleep=function(n){return new Promise(function(e){return setTimeout(e,n||0)})},formatJson=function(json,indent,leftBracesInSameLine){function getIndentStr(n){for(var e="",t=0;t<n;t++)e+=indent||"	";return e}function format(n,e){e=void 0===e?0:e;var t="";if("object"==typeof n&&null!=n){var r=n instanceof Array,o=0;for(var a in t+="".concat(r?"[":"{","\n"),n){t+=o++>0?",\n":"";var c="object"==typeof n[a]&&null!=n[a],i=getIndentStr(e+1);t+=(r&&c?"":i)+(r?"":'"'.concat(a,'": ').concat(c&&!leftBracesInSameLine?"\n":""))+(!c||c&&leftBracesInSameLine&&!r?"":i)+format(n[a],e+1)}t+="\n".concat(getIndentStr(e)).concat(r?"]":"}")}else{var s="string"==typeof n?'"':"";t+="".concat(s).concat(n).concat(s)}return t}return format(eval("(".concat(json,")")))},getRandom=function(n,e){return"number"==typeof n?(void 0===e&&(e=n,n=0),n+Math.floor(Math.random()*(e-n))):n instanceof Array?void 0!==e?(n.sort(function(){return Math.random()>.5?1:-1}),n.slice(0,e)):0===n.length?null:1===n.length?n[0]:n[Math.floor(Math.random()*n.length)]:Math.random()},getRandomStr=function(n,e){n=n||18;var t="ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz0123456789".split("");"number"===e&&(t="0123456789".split(""));for(var r="",o=0;o<n;o++)r+=getRandom(t);return r},toUnderline=function(n,e){return n.replace(/([A-Z])/g,function(n,t){return"".concat(e||"_").concat(t.toLowerCase())})},toHump=function(n,e){return n.replace(RegExp("".concat(e||"_","(\\w)"),"g"),function(n,e){return e.toUpperCase()})};export{Request,copyToClipboard,createEnum,decodeHtml,deepCopy,delParam,encodeHtml,formatDate,formatJson,getIdCardLastChar,getParam,getParamInt,getParams,getRandom,getRandomStr,hideLoading,initWindowMessage,keyCodes,parseDate,request,setParam,showLoading,sleep,toHump,toUnderline,toUrlParams,validateIdCard};
