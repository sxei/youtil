import{_ as e,a as n,b as t,c as r,d as o}from"./bb1b9025.esm.es5.production.mjs";function a(n){var t=e(n);return n.forEach(function(e){t[e.key]=e.value}),t.pick=function(e){return n.find(function(n){return n.key===e||n.value===e})},t.pickLabel=function(e){var n;return null===(n=t.pick(e))||void 0===n?void 0:n.label},t.pickValue=function(e){var n;return null===(n=t.pick(e))||void 0===n?void 0:n.value},t.pickKey=function(e){var n;return null===(n=t.pick(e))||void 0===n?void 0:n.key},t}var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"请稍候",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(t=Object.assign({},{hasMask:!1,maskColor:"#00000070",onCancel:null,cancelInline:!1,id:"com_global_page_loading"},t)).id,o=t.hasMask,a=t.maskColor,c=t.onCancel,s=t.cancelInline,l="_".concat(r,"_timeout");window[l]&&clearTimeout(window[l]);var u=document.getElementById(r);u||((u=document.createElement("div")).id=r,u.className=r,document.body.append(u));var d="".concat(r,"_style");if(!document.getElementById(d)){var f=document.createElement("style");f.id=d,f.innerHTML="\n        .".concat(r," {\n            position: fixed;\n            left: 0;\n            top: 0;\n            width: 100vw;\n            height: 100vh;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            pointer-events: none;\n            z-index: 10000;\n        }\n        .").concat(r,".show-mask {\n            pointer-events: unset;\n            background: #00000070;\n        }\n        .").concat(r," .mask-wrapper {\n            position: fixed;\n        }\n        .").concat(r," .loading-wrapper {\n            width: 120px;\n            height: 120px;\n            z-index: 8000;\n            background: rgba(0, 0, 0, 0.6);\n            border-radius: 8px;\n            text-align: center;\n            color: white;\n            display: flex;\n            justify-content: center;\n            flex-direction: column;\n            align-items: center;\n            pointer-events: initial;\n            line-height: 1.3;\n        }\n        .").concat(r," .loading-wrapper img {\n            width: 50px;\n            height: 50px;\n            margin-bottom: 10px;\n        }\n        .").concat(r," .loading-wrapper a {\n            color: #6ab2ff;\n        }"),document.head.appendChild(f)}if(u.innerHTML='\n        <div class="loading-wrapper">\n            <img src="https://img.alicdn.com/tfs/TB1bnUsQBLoK1RjSZFuXXXn0XXa-32-32.svg" alt="加载中">\n            <div>\n                <span>'.concat(e,"</span>\n                ").concat(s?"":"<br />","\n                ").concat(c?'<a href="javascript:;" class="cancel">取消</a>':"","\n            </div>\n        </div>"),c){var p=u.querySelector(".cancel");p&&p.addEventListener("click",function(){i(),c()})}u.addEventListener("click",function(){i()}),u.style.display="flex",u.style.background=o?a:"transparent",u.className="".concat(r," ").concat(o?"show-mask":""),n>0&&(window[l]=setTimeout(function(){i()},1e3*n))},i=function(){var e=document.getElementById("com_global_page_loading");e&&(e.style.display="none")};function s(r,o){o||window===window.parent||(o=window.parent),!o&&window.opener&&(o=window.opener);var a,c=new Map,i=new Map,s=function(){return Math.random().toString(36).substring(2)},l={},u="_local_function_",d=function(e,n){return(null==e?void 0:e.map(function(e){if("object"==typeof e)for(var t in e)e[t]=n(e[t]);return n(e)}))||[]};function f(e){for(var n=arguments.length,t=Array(n>1?n-1:0),a=1;a<n;a++)t[a-1]=arguments[a];if(!o){console.warn("TargetWindow is null.");return}return new Promise(function(n,a){var i=s();c.set(i,{resolve:n,reject:a}),o.postMessage({scene:r,type:"event",eventName:e,payload:d(t,function(e){var n;return"function"==typeof e?(l[n="".concat(u).concat(s())]=e,n):e}),callbackId:i},"*")})}function p(e,n){i.has(e)||i.set(e,[]),i.get(e).push(n)}return window.addEventListener("message",(a=n(function(n){var a,s,l,p,g,v,m,h,y,w,b,x,M;return t(this,function(t){switch(t.label){case 0:if(!n.data||n.data.scene!==r)return[2];if(o=n.source,s=(a=n.data).type,l=a.eventName,p=a.payload,g=a.callbackId,"event"!==s)return[3,6];v=d(p,function(n){if("string"==typeof n&&n.startsWith(u)){var t="getFn_".concat(n);return function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return f.apply(void 0,["executeLocalFunction",t].concat(e(r)))}}return n}),m=i.get(l)||[],h=i.get("*")||[],t.label=1;case 1:return t.trys.push([1,4,,5]),[4,Promise.all(m.map(function(n){return Promise.resolve(n.apply(void 0,e(v)))}))];case 2:return y=t.sent(),[4,Promise.all(h.map(function(n){return Promise.resolve(n.apply(void 0,[l].concat(e(v))))}))];case 3:if(w=t.sent(),g){if(b=y[y.length-1]||w[w.length-1],!m.length&&!b)return[2];o.postMessage({scene:r,type:"callback",callbackId:g,payload:b},"*")}return[3,5];case 4:return console.error(x=t.sent()),g&&o.postMessage({scene:r,type:"callback",callbackId:g,error:x||"unknown error"},"*"),[3,5];case 5:return[3,7];case 6:"callback"===s&&g&&(M=c.get(g))&&(n.data.error?M.reject(n.data.error):M.resolve(n.data.payload),c.delete(g)),t.label=7;case 7:return[2]}})}),function(e){return a.apply(this,arguments)})),p("executeLocalFunction",function(n){for(var t=arguments.length,r=Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];if(!l[n=(null==n?void 0:n.replace("getFn_",""))||""])throw Error("未找到本地缓存方法：".concat(n));return l[n].apply(l,e(r))}),f("auto-connect"),{postMessage:f,onMessage:p}}var l=function(e){return e&&"object"==typeof e?JSON.parse(JSON.stringify(e)):e},u=function(e){if("string"==typeof e){var n=document.createElement("div");return n.innerText=e,n.innerHTML}if("object"==typeof e&&e)for(var t in e)e[t]=u(e[t]);return e},d=function(e){if("string"==typeof e){var n=document.createElement("div");return n.innerHTML=e,n.innerText}if("object"==typeof e&&e)for(var t in e)e[t]=d(e[t]);return e},f=function(e,n,t){if(!e)throw Error("text can not be empty.");return(n=n||function(e){return console.error("复制到剪贴板失败：".concat(e||""))},navigator.clipboard&&!t)?navigator.clipboard.writeText(e).catch(function(e){throw n(e.message),e}):new Promise(function(t,r){var o=document.createElement("input");o.value=e,o.style.cssText="position:fixed;left:0;top:0;opacity:0;",document.body.appendChild(o),o.select();try{if(document.execCommand("copy"))t();else{var a="Failed to execute 'document.execCommand'.";n(a),r(Error(a))}}catch(e){n(e.message),r(e)}finally{document.body.removeChild(o)}})},p=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.search;return(RegExp("(^|\\?|&)".concat(e,"=(.*?)(?=&|#|$)"),"g").exec(n)||[])[2]},g=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.search;return parseInt(p(e,n)||"0",10)},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.search,n=((e||"").split("?").pop()||"").split("#")[0]||"",t={};return n.split("&").map(function(e){return e.split("=")}).forEach(function(e){var n=r(e,2),o=n[0],a=n[1];t[o]=a||""}),t},m=function(e,n,t){if(void 0!==p(e,t=t||"".concat(location.pathname).concat(location.search)))return t.replace(RegExp("(^|\\?|&)".concat(e,"=(.*?)(?=&|#|$)"),"g"),"$1".concat(e,"=").concat(n));var o=r(t.split("#"),2),a=o[0],c=o[1];return"".concat(a).concat(0>a.indexOf("?")?"?":"&").concat(e,"=").concat(n).concat(c?"#":"").concat(c||"")},h=function(e,n){return(n=n||"".concat(location.pathname).concat(location.search)).replace(RegExp("(^|\\?|&)".concat(e,"=.*?(&|#|$)"),"g"),function(e,n,t){return"&"===t?n:t})},y=function(e){return Object.keys(e||{}).filter(function(n){return void 0!==e[n]}).map(function(n){var t="object"==typeof e[n]?JSON.stringify(e[n]):e[n];return"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(t))}).join("&")},w=function(e,n){var t=Object.assign({},e||{},n||{});return t.headers=o({},t.headers||{}),t.fetchOptions=o({},t.fetchOptions||{}),t},b=function(){var e=n(function(e,n){var r,a,c,i,s,l,u,d,f,p,g,v,m,h,b,x,M,k,E;return t(this,function(t){switch(t.label){case 0:if(a=(r=(n=w({errorMessage:"系统繁忙，请稍后再试",errorHandler:function(e){if(!(null==n?void 0:n.silent)){var t;null==n||null===(t=n.toastHandler)||void 0===t||t.call(n,e)}throw Error(e)},baseUrl:"",headers:{},fetchOptions:{credentials:"include"},checkSuccess:function(e){return(null==e?void 0:e.code)==0||(null==e?void 0:e.code)==200},toastHandler:function(e){return console.error("[您还没有配置toastHandler，请根据您的UI组件库配置合适的提示方法] ".concat(e||""))},onFetchResponse:function(e){if(200===e.status)return e.json();var n={code:e.status,status:e.status,message:e.statusText,headers:e.headers,_response:e},t=Error(n.message);throw t.response=n,t}},n))||{}).params,c=r.data,i=r.formData,s=r.json,l=r.method,u=r.headers,d=r.baseUrl,f=r.fetchOptions,p=r.checkSuccess,g=r.afterRequest,v=r.errorHandler,m=r.errorMessage,h=r.responseConverter,b=r.onFetchResponse,f.headers=o({},u||{},f.headers||{}),a&&(f.method=l||"GET",e="".concat(e).concat(e.indexOf("?")>=0?"&":"?").concat(y(a))),c)Object.assign(f,{method:l||"POST",body:y(c),headers:o({"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"},f.headers||{})});else if(i){if(x=i,!(i instanceof FormData))for(var j in x=new FormData,i)x.append(j,i[j]);Object.assign(f,{method:l||"POST",body:x})}else s&&Object.assign(f,{method:l||"POST",body:JSON.stringify(s),headers:o({"Content-Type":"application/json;charset=utf-8"},f.headers||{})});M=null,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,fetch("".concat(d||"").concat(e),f).then(b)];case 2:return M=t.sent(),[3,4];case 3:return console.error(k=t.sent()),null==g||g(!1,{message:null==k?void 0:k.message}),null==v||v((null===(E=k.response)||void 0===E?void 0:E.message)||m||"",k.response),[2,void 0];case 4:if(M=h?h(M):M,null==p?void 0:p(M))return null==g||g(!0,M),[2,M.data];return null==g||g(!1,M),null==v||v(M.message||M.msg||m||"",M),[2,void 0]}})});return function(n,t){return e.apply(this,arguments)}}(),x=function(e){var n=w(this.overrideDefaultOptions,e),t=function(e,t){return b(e,w(n,t))};return t.overrideDefaultOptions=n,t.create=x.bind(t),t};b.create=x.bind(b);var M=function(e,n){var t=n;return n||(t=e,e=b),function(n,r){return e(n,o({},t||{},r||{}))}},k=function(e,n){var t=function(e){n=n.replace(RegExp("".concat(e,"+"),"g"),function(n){var t="".concat(r[e]);if("w"===e)return"".concat(n.length>2?"星期":"周").concat(o[t]);for(var a=0,c=t.length;a<n.length-c;a++)t="0".concat(t);return 1===n.length?t:t.substring(t.length-n.length)})};if(!e)return"";if("number"==typeof e)e=new Date(e);else if("string"==typeof e){if(/^\d{12,13}$/g.test(e))e=new Date(parseInt(e,10));else{if(!/^.{10}T.{8,12}Z?$/g.test(e))return e;e=new Date(e)}}if(!(e instanceof Date))throw Error("formatDate error: not date.");if(isNaN(null==e?void 0:e.getFullYear()))throw Error("formatDate error: invalid date.");n=n||"yyyy-MM-dd HH:mm:ss";var r={y:e.getFullYear(),M:e.getMonth()+1,d:e.getDate(),q:Math.floor((e.getMonth()+3)/3),w:e.getDay(),H:e.getHours(),h:e.getHours()%12==0?12:e.getHours()%12,m:e.getMinutes(),s:e.getSeconds(),S:e.getMilliseconds()},o=["天","一","二","三","四","五","六"];for(var a in r)t(a);return n},E=function(e,n){var t={y:0,M:1,d:0,H:0,h:0,m:0,s:0,S:0};(n=n||"yyyy-MM-dd").replace(/([^yMdHmsS]*?)(([yMdHmsS])\3*)([^yMdHmsS]*?)/g,function(n,r,o,a,c){return e=e.replace(RegExp("".concat(r,"(\\d{").concat(o.length,"})").concat(c)),function(e,n){return t[a]=parseInt(n,10),""}),""}),t.M--;var r=new Date(t.y,t.M,t.d,t.H,t.m,t.s);return 0!==t.S&&r.setMilliseconds(t.S),r},j=function(e){return new Promise(function(n){return setTimeout(n,e||0)})};export{M as Request,f as copyToClipboard,a as createEnum,d as decodeHtml,l as deepCopy,h as delParam,u as encodeHtml,k as formatDate,p as getParam,g as getParamInt,v as getParams,i as hideLoading,s as initWindowMessage,E as parseDate,b as request,m as setParam,c as showLoading,j as sleep,y as toUrlParams};
