"use strict";(self.webpackChunkyoutil=self.webpackChunkyoutil||[]).push([[773],{85383:function(s,l,t){t.r(l);var r=t(72269),o=t(93359),i=t(61788),x=t(19977),m=t(78003),n=t(24268),E=t(96057),I=t(83213),u=t(53683),d=t(80936),e=t(67294),a=t(811);function c(){return e.createElement(u.dY,null,e.createElement(e.Suspense,{fallback:e.createElement(d.Z,null)},e.createElement(e.Fragment,null,e.createElement("div",{className:"markdown"},e.createElement("h1",{id:"api\u8BF7\u6C42request"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#api\u8BF7\u6C42request"},e.createElement("span",{className:"icon icon-link"})),"API\u8BF7\u6C42(request)"),e.createElement("p",null,e.createElement("code",null,a.texts[0].value),a.texts[1].value),e.createElement("ul",null,e.createElement("li",null,a.texts[2].value),e.createElement("li",null,a.texts[3].value,e.createElement("code",null,a.texts[4].value),a.texts[5].value),e.createElement("li",null,a.texts[6].value,e.createElement("code",null,a.texts[7].value),a.texts[8].value)),e.createElement("h2",{id:"\u5982\u4F55\u4F7F\u7528"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u5982\u4F55\u4F7F\u7528"},e.createElement("span",{className:"icon icon-link"})),"\u5982\u4F55\u4F7F\u7528"),e.createElement("p",null,e.createElement("code",null,a.texts[9].value),a.texts[10].value,e.createElement(u.rU,{to:"/docs/api/interfaces/IRequestOptions"},a.texts[11].value),a.texts[12].value),e.createElement(n.Z,{lang:"js"},a.texts[13].value),e.createElement("h2",{id:"\u5178\u578B\u793A\u4F8B"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u5178\u578B\u793A\u4F8B"},e.createElement("span",{className:"icon icon-link"})),"\u5178\u578B\u793A\u4F8B")),e.createElement(u.Dl,{demo:{id:"markdown-guide-request-demo-0"},previewerProps:{}}),e.createElement("div",{className:"markdown"},e.createElement("h2",{id:"\u81EA\u5B9A\u4E49\u5F02\u5E38\u515C\u5E95\u6587\u6848"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u81EA\u5B9A\u4E49\u5F02\u5E38\u515C\u5E95\u6587\u6848"},e.createElement("span",{className:"icon icon-link"})),"\u81EA\u5B9A\u4E49\u5F02\u5E38\u515C\u5E95\u6587\u6848"),e.createElement(n.Z,{lang:"js"},a.texts[14].value),e.createElement("h2",{id:"\u81EA\u5B9A\u4E49\u5F02\u5E38\u5904\u7406"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u81EA\u5B9A\u4E49\u5F02\u5E38\u5904\u7406"},e.createElement("span",{className:"icon icon-link"})),"\u81EA\u5B9A\u4E49\u5F02\u5E38\u5904\u7406"),e.createElement(n.Z,{lang:"js"},a.texts[15].value),e.createElement("h2",{id:"\u9759\u9ED8\u8BF7\u6C42"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u9759\u9ED8\u8BF7\u6C42"},e.createElement("span",{className:"icon icon-link"})),"\u9759\u9ED8\u8BF7\u6C42"),e.createElement("p",null,a.texts[16].value),e.createElement(n.Z,{lang:"js"},a.texts[17].value),e.createElement("h2",{id:"loading\u5904\u7406"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#loading\u5904\u7406"},e.createElement("span",{className:"icon icon-link"})),"loading\u5904\u7406"),e.createElement("p",null,a.texts[18].value,e.createElement("code",null,a.texts[19].value),a.texts[20].value),e.createElement(n.Z,{lang:"js"},a.texts[21].value),e.createElement("h2",{id:"\u81EA\u5B9A\u4E49baseurl"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u81EA\u5B9A\u4E49baseurl"},e.createElement("span",{className:"icon icon-link"})),"\u81EA\u5B9A\u4E49baseURL"),e.createElement(n.Z,{lang:"js"},a.texts[22].value),e.createElement("h2",{id:"\u81EA\u5B9A\u4E49-axios-\u914D\u7F6E"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u81EA\u5B9A\u4E49-axios-\u914D\u7F6E"},e.createElement("span",{className:"icon icon-link"})),"\u81EA\u5B9A\u4E49 axios \u914D\u7F6E"),e.createElement(n.Z,{lang:"js"},a.texts[23].value),e.createElement("h2",{id:"\u975E\u6807\u573A\u666F\u517C\u5BB9"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u975E\u6807\u573A\u666F\u517C\u5BB9"},e.createElement("span",{className:"icon icon-link"})),"\u975E\u6807\u573A\u666F\u517C\u5BB9"),e.createElement("p",null,a.texts[24].value),e.createElement(n.Z,{lang:"ts"},a.texts[25].value),e.createElement("p",null,a.texts[26].value,e.createElement("code",null,a.texts[27].value),a.texts[28].value),e.createElement(n.Z,{lang:"js"},a.texts[29].value),e.createElement("h2",{id:"\u5F02\u5E38\u4E2D\u65AD\u6267\u884C"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u5F02\u5E38\u4E2D\u65AD\u6267\u884C"},e.createElement("span",{className:"icon icon-link"})),"\u5F02\u5E38\u4E2D\u65AD\u6267\u884C"),e.createElement("p",null,a.texts[30].value,e.createElement("code",null,a.texts[31].value),a.texts[32].value,e.createElement("code",null,a.texts[33].value),a.texts[34].value),e.createElement(n.Z,{lang:"js"},a.texts[35].value),e.createElement("p",null,a.texts[36].value,e.createElement("code",null,a.texts[37].value),a.texts[38].value,e.createElement("code",null,a.texts[39].value),a.texts[40].value),e.createElement(n.Z,{lang:"js"},a.texts[41].value),e.createElement("h2",{id:"get\u8BF7\u6C42"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#get\u8BF7\u6C42"},e.createElement("span",{className:"icon icon-link"})),"GET\u8BF7\u6C42"),e.createElement("p",null,a.texts[42].value,e.createElement("code",null,a.texts[43].value),a.texts[44].value,e.createElement("code",null,a.texts[45].value),a.texts[46].value),e.createElement(n.Z,{lang:"js"},a.texts[47].value),e.createElement("h2",{id:"post\u8BF7\u6C42"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#post\u8BF7\u6C42"},e.createElement("span",{className:"icon icon-link"})),"POST\u8BF7\u6C42"),e.createElement("p",null,a.texts[48].value,e.createElement("code",null,a.texts[49].value),a.texts[50].value,e.createElement("code",null,a.texts[51].value),a.texts[52].value),e.createElement(n.Z,{lang:"js"},a.texts[53].value),e.createElement("h2",{id:"formdata\u6A21\u5F0F"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#formdata\u6A21\u5F0F"},e.createElement("span",{className:"icon icon-link"})),"formData\u6A21\u5F0F"),e.createElement("p",null,a.texts[54].value,e.createElement("code",null,a.texts[55].value),a.texts[56].value),e.createElement(n.Z,{lang:"js"},a.texts[57].value),e.createElement("h2",{id:"postjson\u8BF7\u6C42"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#postjson\u8BF7\u6C42"},e.createElement("span",{className:"icon icon-link"})),"PostJson\u8BF7\u6C42"),e.createElement("p",null,a.texts[58].value,e.createElement("code",null,a.texts[59].value),a.texts[60].value,e.createElement("code",null,a.texts[61].value),a.texts[62].value),e.createElement("blockquote",null,e.createElement("p",null,a.texts[63].value,e.createElement("code",null,a.texts[64].value),a.texts[65].value,e.createElement("code",null,a.texts[66].value),a.texts[67].value,e.createElement("code",null,a.texts[68].value),a.texts[69].value)),e.createElement(n.Z,{lang:"js"},a.texts[70].value),e.createElement("h2",{id:"\u521B\u5EFA\u65B0\u7684\u5B9E\u4F8B"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u521B\u5EFA\u65B0\u7684\u5B9E\u4F8B"},e.createElement("span",{className:"icon icon-link"})),"\u521B\u5EFA\u65B0\u7684\u5B9E\u4F8B")),e.createElement(u.Dl,{demo:{id:"markdown-guide-request-demo-1"},previewerProps:{}}),e.createElement("div",{className:"markdown"},e.createElement("h2",{id:"\u672A\u5B8C\u5F85\u7EED"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u672A\u5B8C\u5F85\u7EED"},e.createElement("span",{className:"icon icon-link"})),"\u672A\u5B8C\u5F85\u7EED")))))}l.default=c},811:function(s,l,t){t.r(l),t.d(l,{texts:function(){return r}});const r=[{value:"request",paraId:0,tocIndex:0},{value:"\u662F\u4E00\u4E2A\u529F\u80FD\u5F3A\u5927\u7684API\u8BF7\u6C42\u51FD\u6570\uFF0C\u4E3B\u8981\u7279\u70B9\uFF1A",paraId:0,tocIndex:0},{value:"\u4F7F\u7528\u7B80\u5355\uFF0C\u9AD8\u5EA6\u96C6\u6210\uFF0C\u53EA\u66B4\u9732\u51E0\u4E2A\u7B80\u5355\u7684\u53C2\u6570\uFF0C\u5185\u7F6E\u4E86\u53C2\u6570\u5904\u7406\u3001\u5F02\u5E38\u515C\u5E95\u5904\u7406\u7B49\uFF1B",paraId:1,tocIndex:0},{value:"\u57FA\u4E8E\u73B0\u4EE3\u5316\u7684",paraId:1,tocIndex:0},{value:"fetch",paraId:1,tocIndex:0},{value:"\uFF0C\u5E76\u5F00\u653E\u6240\u6709\u5E95\u5C42\u914D\u7F6E\uFF1B",paraId:1,tocIndex:0},{value:"\u5021\u5BFC\u7528\u201C\u540C\u6B65\u201D\u7684\u601D\u60F3\u53BB\u5199\u5F02\u6B65\u4EE3\u7801\uFF0C\u53D1\u751F\u5F02\u5E38\u9ED8\u8BA4\u4E2D\u65AD\u6267\u884C\uFF0C\u5F00\u53D1\u8005\u53EA\u9700\u8981\u5173\u6CE8\u6210\u529F\u5904\u7406\u903B\u8F91\uFF0C\u7406\u60F3\u60C5\u51B5\u4E0B\u65E0\u9700\u5173\u5FC3\u5F02\u5E38\u515C\u5E95\uFF0C\u65E0\u9700",paraId:1,tocIndex:0},{value:"try-catch",paraId:1,tocIndex:0},{value:"\uFF1B",paraId:1,tocIndex:0},{value:"requestOptions",paraId:2,tocIndex:1},{value:"\u5B8C\u6574\u53C2\u6570\u8BE6\u89C1",paraId:2,tocIndex:1},{value:"\u8FD9\u91CC",paraId:3,tocIndex:1},{value:"\u3002",paraId:2,tocIndex:1},{value:`import { request } from 'youtil';
const data = await requestAPI(url, requestOptions);
`,paraId:4,tocIndex:1},{value:`await requestAPI('xxx', { errorMessage: '\u7CFB\u7EDF\u7E41\u5FD9\uFF0C\u7A0D\u540E\u518D\u8BD5\uFF01' });
`,paraId:5,tocIndex:3},{value:`const errorHandler = (message: string, resp: any) => {
  if (resp?.busiCode === '3') {
    Toast.show({ title: '\u6211\u662F\u81EA\u5B9A\u4E49\u7279\u6B8A\u5F02\u5E38', icon: 'error' });
  }
  Toast.show({ title: message, icon: 'error' });
  // \u629B\u51FA\u5F02\u5E38\uFF0C\u963B\u6B62\u6267\u884C\u4E4B\u540E\u7684\u64CD\u4F5C
  throw new Error(message);
}
await requestAPI('xxx', { errorHandler });
`,paraId:6,tocIndex:4},{value:"\u6709\u4E9B\u65F6\u5019\u53EF\u80FD\u4E0D\u5173\u6CE8\u8BF7\u6C42\u5F02\u5E38\uFF0C\u671F\u671B\u53D1\u751F\u5F02\u5E38\u65F6\u4E0D\u544A\u77E5\u7528\u6237\uFF1A",paraId:7,tocIndex:5},{value:`await requestAPI('xxx', { silent: true });
`,paraId:8,tocIndex:5},{value:"\u4E00\u822C\u5728\u8BF7\u6C42\u5F00\u59CB\u663E\u793Aloading\uFF0C\u8BF7\u6C42\u7ED3\u675F\u65E0\u8BBA\u6210\u529F\u4E0E\u5426\u5173\u95EDloading\uFF0C\u53EF\u4EE5\u4F7F\u7528",paraId:9,tocIndex:6},{value:"afterRequest",paraId:9,tocIndex:6},{value:"\u94A9\u5B50\uFF1A",paraId:9,tocIndex:6},{value:`setLoading(true);
const afterRequest = (success: boolean, resp: any) => setLoading(false); 
await requestAPI('xxx', { afterRequest });
`,paraId:10,tocIndex:6},{value:`setLoading(true);
const baseURL= '//xxx.jd.com';
await requestAPI('xxx', { baseURL });
`,paraId:11,tocIndex:7},{value:`setLoading(true);
const axiosOptions = {
  timeout: 30000,
};
await requestAPI('xxx', { axiosOptions });
`,paraId:12,tocIndex:8},{value:"requestAPI\u9ED8\u8BA4\u8981\u6C42\u54CD\u5E94\u9700\u8981\u6EE1\u8DB3\uFF1A",paraId:13,tocIndex:9},{value:`export interface IResponse {
  // \u4E3A0\u8868\u793A\u6210\u529F
  busiCode?: string;
  // \u4E3A0\u8868\u793A\u6210\u529F
  resultCode?: string;
  data: any;
  message?: string;
}
`,paraId:14,tocIndex:9},{value:"\u5BF9\u4E8E\u975E\u6807\u8FD4\u56DE\u53EF\u4EE5\u901A\u8FC7",paraId:15,tocIndex:9},{value:"responseConverter",paraId:15,tocIndex:9},{value:"\u8FDB\u884C\u683C\u5F0F\u5316\u540E\u517C\u5BB9\uFF1A",paraId:15,tocIndex:9},{value:`const responseConverter = resp => {
  if (resp) {
    resp.resultCode = resp.xxxCode;
  }
  return resp;
};
await requestAPI('xxx', { responseConverter });
`,paraId:16,tocIndex:9},{value:"\u5F02\u5E38\u4E2D\u65AD\u6267\u884C\u662F\u901A\u8FC7",paraId:17,tocIndex:10},{value:"errorHandler",paraId:17,tocIndex:10},{value:"\u4E2D\u7684",paraId:17,tocIndex:10},{value:"throw new Error",paraId:17,tocIndex:10},{value:"\u5B9E\u73B0\u7684\uFF1A",paraId:17,tocIndex:10},{value:`await requestAPI('xxx');
console.log('\u5982\u679C\u53D1\u751F\u5F02\u5E38\uFF0C\u8FD9\u6761console.log\u4E0D\u4F1A\u6267\u884C');
`,paraId:18,tocIndex:10},{value:"\u8FD9\u79CD\u60C5\u51B5\u4E0B\u63A7\u5236\u53F0\u4F1A\u4EA7\u751F\u4E00\u6761\u672A\u5904\u7406\u7684\u5F02\u5E38\u65E5\u5FD7\uFF0C\u5982\u679C\u786E\u5B9E\u6709\u5F3A\u8FEB\u75C7\u4E0D\u559C\u6B22\u8FD9\u79CD\u6A21\u5F0F\uFF0C",paraId:19,tocIndex:10},{value:"requestAPI",paraId:19,tocIndex:10},{value:"\u4E5F\u662F\u652F\u6301",paraId:19,tocIndex:10},{value:"try-catch",paraId:19,tocIndex:10},{value:"\u7684\uFF1A",paraId:19,tocIndex:10},{value:`try {
  await requestAPI('xxx');
} catch (e) {
}
console.log('\u5982\u679C\u53D1\u751F\u5F02\u5E38\uFF0C\u8FD9\u6761console.log\u4ECD\u7136\u4F1A\u6267\u884C');
`,paraId:20,tocIndex:10},{value:"\u4F20\u5165",paraId:21,tocIndex:11},{value:"params",paraId:21,tocIndex:11},{value:"\u53C2\u6570\u4F1A\u9ED8\u8BA4\u6309\u7167",paraId:21,tocIndex:11},{value:"GET",paraId:21,tocIndex:11},{value:"\u5904\u7406\uFF1A",paraId:21,tocIndex:11},{value:`const params = {};
await requestAPI('xxx', { params });
`,paraId:22,tocIndex:11},{value:"\u4F20\u5165",paraId:23,tocIndex:12},{value:"data",paraId:23,tocIndex:12},{value:"\u53C2\u6570\u4F1A\u9ED8\u8BA4\u6309\u7167",paraId:23,tocIndex:12},{value:"POST",paraId:23,tocIndex:12},{value:"\u5904\u7406\uFF1A",paraId:23,tocIndex:12},{value:`const data = {};
await requestAPI('xxx', { data });
`,paraId:24,tocIndex:12},{value:"\u4F20\u5165",paraId:25,tocIndex:13},{value:"formData",paraId:25,tocIndex:13},{value:"\u53C2\u6570\uFF1A",paraId:25,tocIndex:13},{value:`const formData = {
  file: SomeFile,
};
await requestAPI('xxx', { formData });
`,paraId:26,tocIndex:13},{value:"\u4F20\u5165",paraId:27,tocIndex:14},{value:"json",paraId:27,tocIndex:14},{value:"\u53C2\u6570\u4F1A\u9ED8\u8BA4\u6309\u7167",paraId:27,tocIndex:14},{value:"postJson",paraId:27,tocIndex:14},{value:"\u6A21\u5F0F\u5904\u7406\uFF1A",paraId:27,tocIndex:14},{value:"\u6240\u8C13",paraId:28,tocIndex:14},{value:"postJson",paraId:28,tocIndex:14},{value:"\u6A21\u5F0F\uFF1A",paraId:28,tocIndex:14},{value:"POST",paraId:28,tocIndex:14},{value:" + ",paraId:28,tocIndex:14},{value:"Content-Type: 'application/json'",paraId:28,tocIndex:14},{value:"\uFF1A",paraId:28,tocIndex:14},{value:`const json = {};
await requestAPI('xxx', { json });
`,paraId:29,tocIndex:14}]}}]);
