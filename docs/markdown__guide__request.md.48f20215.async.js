"use strict";(self.webpackChunkyoutil=self.webpackChunkyoutil||[]).push([[7773],{85383:function(d,n,l){l.r(n);var r=l(72269),o=l(93359),x=l(61788),I=l(19977),v=l(78003),t=l(24268),m=l(96057),i=l(83213),u=l(53683),s=l(80936),e=l(67294),a=l(811);function c(){return e.createElement(u.dY,null,e.createElement(e.Suspense,{fallback:e.createElement(s.Z,null)},e.createElement(e.Fragment,null,e.createElement("div",{className:"markdown"},e.createElement("h1",{id:"\u63A5\u53E3\u8BF7\u6C42-request"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u63A5\u53E3\u8BF7\u6C42-request"},e.createElement("span",{className:"icon icon-link"})),"\u63A5\u53E3\u8BF7\u6C42 request"),e.createElement("p",null,e.createElement("code",null,a.texts[0].value),a.texts[1].value,e.createElement("code",null,a.texts[2].value),a.texts[3].value),e.createElement("ul",null,e.createElement("li",null,a.texts[4].value),e.createElement("li",null,a.texts[5].value,e.createElement("code",null,a.texts[6].value),a.texts[7].value),e.createElement("li",null,a.texts[8].value,e.createElement("code",null,a.texts[9].value),a.texts[10].value),e.createElement("li",null,a.texts[11].value,e.createElement("code",null,a.texts[12].value),a.texts[13].value)),e.createElement("h2",{id:"\u5982\u4F55\u4F7F\u7528"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u5982\u4F55\u4F7F\u7528"},e.createElement("span",{className:"icon icon-link"})),"\u5982\u4F55\u4F7F\u7528"),e.createElement("p",null,e.createElement("code",null,a.texts[14].value),a.texts[15].value,e.createElement(u.rU,{to:"/api/interfaces/i-request-options"},a.texts[16].value),a.texts[17].value),e.createElement(t.Z,{lang:"js"},a.texts[18].value),e.createElement("h2",{id:"\u5178\u578B\u793A\u4F8B"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u5178\u578B\u793A\u4F8B"},e.createElement("span",{className:"icon icon-link"})),"\u5178\u578B\u793A\u4F8B")),e.createElement(u.Dl,{demo:{id:"markdown-guide-request-demo-0"},previewerProps:{}}),e.createElement("div",{className:"markdown"},e.createElement("h2",{id:"\u5B9A\u4E49toasthandler\u91CD\u8981"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u5B9A\u4E49toasthandler\u91CD\u8981"},e.createElement("span",{className:"icon icon-link"})),"\u5B9A\u4E49toastHandler\uFF08\u91CD\u8981\uFF09"),e.createElement("p",null,a.texts[19].value,e.createElement("code",null,a.texts[20].value),a.texts[21].value),e.createElement(t.Z,{lang:"js"},a.texts[22].value),e.createElement("p",null,a.texts[23].value,e.createElement("code",null,a.texts[24].value),a.texts[25].value,e.createElement("code",null,a.texts[26].value),a.texts[27].value),e.createElement("h2",{id:"\u81EA\u5B9A\u4E49\u5B9E\u4F8B"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u81EA\u5B9A\u4E49\u5B9E\u4F8B"},e.createElement("span",{className:"icon icon-link"})),"\u81EA\u5B9A\u4E49\u5B9E\u4F8B"),e.createElement("p",null,a.texts[28].value,e.createElement("code",null,a.texts[29].value),a.texts[30].value,e.createElement("code",null,a.texts[31].value),a.texts[32].value,e.createElement("code",null,a.texts[33].value),a.texts[34].value,e.createElement("code",null,a.texts[35].value),a.texts[36].value),e.createElement(t.Z,{lang:"js"},a.texts[37].value),e.createElement("h2",{id:"loading\u5904\u7406"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#loading\u5904\u7406"},e.createElement("span",{className:"icon icon-link"})),"loading\u5904\u7406"),e.createElement("p",null,a.texts[38].value,e.createElement("code",null,a.texts[39].value),a.texts[40].value,e.createElement("code",null,a.texts[41].value),a.texts[42].value),e.createElement(t.Z,{lang:"js"},a.texts[43].value),e.createElement("h2",{id:"\u5F02\u5E38\u5904\u7406"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u5F02\u5E38\u5904\u7406"},e.createElement("span",{className:"icon icon-link"})),"\u5F02\u5E38\u5904\u7406"),e.createElement("h3",{id:"\u975E\u6807\u573A\u666F\u517C\u5BB9\u91CD\u8981\u5FC5\u770B"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u975E\u6807\u573A\u666F\u517C\u5BB9\u91CD\u8981\u5FC5\u770B"},e.createElement("span",{className:"icon icon-link"})),"\u975E\u6807\u573A\u666F\u517C\u5BB9\uFF08\u91CD\u8981\u5FC5\u770B\uFF09"),e.createElement("p",null,a.texts[44].value),e.createElement(t.Z,{lang:"ts"},a.texts[45].value),e.createElement("p",null,e.createElement("code",null,a.texts[46].value),a.texts[47].value),e.createElement("ul",null,e.createElement("li",null,a.texts[48].value,e.createElement("code",null,a.texts[49].value),a.texts[50].value,e.createElement("code",null,a.texts[51].value),a.texts[52].value),e.createElement("li",null,a.texts[53].value,e.createElement("code",null,a.texts[54].value),a.texts[55].value,e.createElement("code",null,a.texts[56].value),a.texts[57].value,e.createElement("code",null,a.texts[58].value),a.texts[59].value),e.createElement("li",null,a.texts[60].value,e.createElement("code",null,a.texts[61].value),a.texts[62].value,e.createElement("code",null,a.texts[63].value),a.texts[64].value,e.createElement("code",null,a.texts[65].value),a.texts[66].value)),e.createElement("p",null,a.texts[67].value,e.createElement("code",null,a.texts[68].value),a.texts[69].value,e.createElement("code",null,a.texts[70].value),a.texts[71].value),e.createElement(t.Z,{lang:"js"},a.texts[72].value),e.createElement("h3",{id:"\u9ED8\u8BA4\u5F02\u5E38\u6587\u6848"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u9ED8\u8BA4\u5F02\u5E38\u6587\u6848"},e.createElement("span",{className:"icon icon-link"})),"\u9ED8\u8BA4\u5F02\u5E38\u6587\u6848"),e.createElement("p",null,a.texts[73].value,e.createElement("code",null,a.texts[74].value),a.texts[75].value,e.createElement("code",null,a.texts[76].value),a.texts[77].value),e.createElement("h3",{id:"\u81EA\u5B9A\u4E49\u5F02\u5E38\u6587\u6848"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u81EA\u5B9A\u4E49\u5F02\u5E38\u6587\u6848"},e.createElement("span",{className:"icon icon-link"})),"\u81EA\u5B9A\u4E49\u5F02\u5E38\u6587\u6848"),e.createElement("p",null,a.texts[78].value,e.createElement("code",null,a.texts[79].value),a.texts[80].value,e.createElement("code",null,a.texts[81].value),a.texts[82].value),e.createElement(t.Z,{lang:"js"},a.texts[83].value),e.createElement("p",null,a.texts[84].value,e.createElement("code",null,a.texts[85].value),a.texts[86].value),e.createElement(t.Z,{lang:"js"},a.texts[87].value),e.createElement("h3",{id:"\u81EA\u5B9A\u4E49\u515C\u5E95\u6587\u6848"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u81EA\u5B9A\u4E49\u515C\u5E95\u6587\u6848"},e.createElement("span",{className:"icon icon-link"})),"\u81EA\u5B9A\u4E49\u515C\u5E95\u6587\u6848"),e.createElement("p",null,e.createElement("code",null,a.texts[88].value),a.texts[89].value,e.createElement("code",null,a.texts[90].value),a.texts[91].value,e.createElement("code",null,a.texts[92].value),a.texts[93].value),e.createElement(t.Z,{lang:"js"},a.texts[94].value),e.createElement("h3",{id:"\u9759\u9ED8\u8BF7\u6C42\u4E0D\u900F\u51FA\u5F02\u5E38"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u9759\u9ED8\u8BF7\u6C42\u4E0D\u900F\u51FA\u5F02\u5E38"},e.createElement("span",{className:"icon icon-link"})),"\u9759\u9ED8\u8BF7\u6C42\uFF08\u4E0D\u900F\u51FA\u5F02\u5E38\uFF09"),e.createElement("p",null,a.texts[95].value,e.createElement("code",null,a.texts[96].value),a.texts[97].value,e.createElement("code",null,a.texts[98].value),a.texts[99].value),e.createElement(t.Z,{lang:"js"},a.texts[100].value),e.createElement("h3",{id:"\u5B8C\u5168\u81EA\u5B9A\u4E49\u5F02\u5E38\u5904\u7406"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u5B8C\u5168\u81EA\u5B9A\u4E49\u5F02\u5E38\u5904\u7406"},e.createElement("span",{className:"icon icon-link"})),"\u5B8C\u5168\u81EA\u5B9A\u4E49\u5F02\u5E38\u5904\u7406"),e.createElement("p",null,a.texts[101].value,e.createElement("code",null,a.texts[102].value),a.texts[103].value),e.createElement(t.Z,{lang:"js"},a.texts[104].value),e.createElement("h2",{id:"\u81EA\u5B9A\u4E49baseurl"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u81EA\u5B9A\u4E49baseurl"},e.createElement("span",{className:"icon icon-link"})),"\u81EA\u5B9A\u4E49baseUrl"),e.createElement(t.Z,{lang:"js"},a.texts[105].value),e.createElement("h2",{id:"\u81EA\u5B9A\u4E49-axios-\u914D\u7F6E"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u81EA\u5B9A\u4E49-axios-\u914D\u7F6E"},e.createElement("span",{className:"icon icon-link"})),"\u81EA\u5B9A\u4E49 axios \u914D\u7F6E"),e.createElement(t.Z,{lang:"js"},a.texts[106].value),e.createElement("h2",{id:"\u5F02\u5E38\u4E2D\u65AD\u6267\u884C"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u5F02\u5E38\u4E2D\u65AD\u6267\u884C"},e.createElement("span",{className:"icon icon-link"})),"\u5F02\u5E38\u4E2D\u65AD\u6267\u884C"),e.createElement("p",null,a.texts[107].value,e.createElement("code",null,a.texts[108].value),a.texts[109].value,e.createElement("code",null,a.texts[110].value),a.texts[111].value),e.createElement(t.Z,{lang:"js"},a.texts[112].value),e.createElement("p",null,a.texts[113].value,e.createElement("code",null,a.texts[114].value),a.texts[115].value,e.createElement("code",null,a.texts[116].value),a.texts[117].value),e.createElement(t.Z,{lang:"js"},a.texts[118].value),e.createElement("h2",{id:"\u4E0D\u540C\u8BF7\u6C42\u65B9\u5F0F"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u4E0D\u540C\u8BF7\u6C42\u65B9\u5F0F"},e.createElement("span",{className:"icon icon-link"})),"\u4E0D\u540C\u8BF7\u6C42\u65B9\u5F0F"),e.createElement("h3",{id:"get\u8BF7\u6C42"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#get\u8BF7\u6C42"},e.createElement("span",{className:"icon icon-link"})),"GET\u8BF7\u6C42"),e.createElement("p",null,a.texts[119].value,e.createElement("code",null,a.texts[120].value),a.texts[121].value,e.createElement("code",null,a.texts[122].value),a.texts[123].value),e.createElement(t.Z,{lang:"js"},a.texts[124].value),e.createElement("h3",{id:"post\u8BF7\u6C42"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#post\u8BF7\u6C42"},e.createElement("span",{className:"icon icon-link"})),"POST\u8BF7\u6C42"),e.createElement("p",null,a.texts[125].value,e.createElement("code",null,a.texts[126].value),a.texts[127].value,e.createElement("code",null,a.texts[128].value),a.texts[129].value),e.createElement(t.Z,{lang:"js"},a.texts[130].value),e.createElement("h3",{id:"postjson\u8BF7\u6C42"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#postjson\u8BF7\u6C42"},e.createElement("span",{className:"icon icon-link"})),"PostJson\u8BF7\u6C42"),e.createElement("p",null,a.texts[131].value,e.createElement("code",null,a.texts[132].value),a.texts[133].value,e.createElement("code",null,a.texts[134].value),a.texts[135].value),e.createElement("blockquote",null,e.createElement("p",null,a.texts[136].value,e.createElement("code",null,a.texts[137].value),a.texts[138].value,e.createElement("code",null,a.texts[139].value),a.texts[140].value,e.createElement("code",null,a.texts[141].value),a.texts[142].value)),e.createElement(t.Z,{lang:"js"},a.texts[143].value),e.createElement("h3",{id:"formdata\u6A21\u5F0F"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#formdata\u6A21\u5F0F"},e.createElement("span",{className:"icon icon-link"})),"formData\u6A21\u5F0F"),e.createElement("p",null,a.texts[144].value,e.createElement("code",null,a.texts[145].value),a.texts[146].value,e.createElement("code",null,a.texts[147].value),a.texts[148].value),e.createElement(t.Z,{lang:"js"},a.texts[149].value),e.createElement("h2",{id:"\u81EA\u5B9A\u4E49headers"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u81EA\u5B9A\u4E49headers"},e.createElement("span",{className:"icon icon-link"})),"\u81EA\u5B9A\u4E49headers"),e.createElement(t.Z,{lang:"js"},a.texts[150].value),e.createElement("h2",{id:"abort-\u8BF7\u6C42\u7EC8\u6B62"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#abort-\u8BF7\u6C42\u7EC8\u6B62"},e.createElement("span",{className:"icon icon-link"})),"abort \u8BF7\u6C42\u7EC8\u6B62")),e.createElement(u.Dl,{demo:{id:"markdown-guide-request-demo-1"},previewerProps:{}}),e.createElement("div",{className:"markdown"},e.createElement("h2",{id:"mockrequest"},e.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#mockrequest"},e.createElement("span",{className:"icon icon-link"})),"mockRequest"),e.createElement("p",null,a.texts[151].value,e.createElement("code",null,a.texts[152].value),a.texts[153].value,e.createElement("code",null,a.texts[154].value),a.texts[155].value,e.createElement("code",null,a.texts[156].value),a.texts[157].value,e.createElement("code",null,a.texts[158].value),a.texts[159].value,e.createElement("code",null,a.texts[160].value),a.texts[161].value,e.createElement("code",null,a.texts[162].value),a.texts[163].value),e.createElement("p",null,a.texts[164].value,e.createElement("code",null,a.texts[165].value),a.texts[166].value,e.createElement("code",null,a.texts[167].value),a.texts[168].value,e.createElement("code",null,a.texts[169].value),a.texts[170].value,e.createElement("code",null,a.texts[171].value),a.texts[172].value,e.createElement("code",null,a.texts[173].value),a.texts[174].value)),e.createElement(u.Dl,{demo:{id:"markdown-guide-request-demo-2"},previewerProps:{}}))))}n.default=c},811:function(d,n,l){l.r(n),l.d(n,{texts:function(){return r}});const r=[{value:"request",paraId:0,tocIndex:0},{value:"\u662F\u4E00\u4E2A\u529F\u80FD\u5F3A\u5927\u7684\u901A\u7528API\u8BF7\u6C42\u51FD\u6570\uFF0C\u57FA\u4E8E",paraId:0,tocIndex:0},{value:"fetch",paraId:0,tocIndex:0},{value:"\u8FDB\u4E00\u6B65\u5C01\u88C5\uFF0C\u4E3B\u8981\u7279\u70B9\uFF1A",paraId:0,tocIndex:0},{value:"\u4F7F\u7528\u7B80\u5355\uFF0C\u9AD8\u5EA6\u96C6\u6210\uFF0C\u53EA\u66B4\u9732\u51E0\u4E2A\u7B80\u5355\u7684\u53C2\u6570\uFF0C\u5185\u7F6E\u53C2\u6570\u52A0\u5DE5\u3001loading\u5904\u7406\u3001\u5F02\u5E38\u515C\u5E95toast\u7B49\u903B\u8F91\uFF1B",paraId:1,tocIndex:0},{value:"\u57FA\u4E8E\u73B0\u4EE3\u5316\u7684",paraId:1,tocIndex:0},{value:"fetch",paraId:1,tocIndex:0},{value:"\uFF0C\u540C\u65F6\u5F00\u653E\u6240\u6709\u5E95\u5C42\u914D\u7F6E\uFF0C\u8DB3\u591F\u7075\u6D3B\uFF1B",paraId:1,tocIndex:0},{value:"\u5021\u5BFC\u7528\u201C\u540C\u6B65\u201D\u7684\u601D\u60F3\u53BB\u5199\u5F02\u6B65\u4EE3\u7801\uFF0C\u53D1\u751F\u5F02\u5E38\u9ED8\u8BA4\u4E2D\u65AD\u6267\u884C\uFF0C\u5F00\u53D1\u8005\u53EA\u9700\u8981\u5173\u6CE8\u6210\u529F\u5904\u7406\u903B\u8F91\uFF0C\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u65E0\u9700\u5904\u7406\u5F02\u5E38\uFF0C\u65E0\u9700",paraId:1,tocIndex:0},{value:"try-catch",paraId:1,tocIndex:0},{value:"\uFF1B",paraId:1,tocIndex:0},{value:"\u5185\u7F6E\u5F3A\u5927\u7684",paraId:1,tocIndex:0},{value:"mock",paraId:1,tocIndex:0},{value:"\u5904\u7406\u80FD\u529B\uFF1B",paraId:1,tocIndex:0},{value:"requestOptions",paraId:2,tocIndex:1},{value:"\u5B8C\u6574\u53C2\u6570\u8BE6\u89C1",paraId:2,tocIndex:1},{value:"\u8FD9\u91CC",paraId:3,tocIndex:1},{value:"\u3002",paraId:2,tocIndex:1},{value:`import { request } from 'youtil';
const data = await request(url, requestOptions);
`,paraId:4,tocIndex:1},{value:"\u8BF7\u6C42\u51FD\u6570\u9ED8\u8BA4\u4E0D\u5305\u542B\u4EFB\u4F55UI\u5E93\uFF0C\u6240\u4EE5\u4F7F\u7528\u524D\u5FC5\u987B\u5B9A\u4E49",paraId:5,tocIndex:3},{value:"toastHandler",paraId:5,tocIndex:3},{value:"\uFF08\u53D1\u751F\u5F02\u5E38\u65F6\u8C03\u7528\uFF09\uFF1A",paraId:5,tocIndex:3},{value:`await request('xxx', { toastHandler: (message) => Toast.show({ title: message, icon: 'error' }) });
`,paraId:6,tocIndex:3},{value:"\u5F53\u7136\u5B9E\u9645\u4F7F\u7528\u4E2D\u60A8\u4E0D\u9700\u8981\u6BCF\u6B21\u8C03\u7528\u65F6\u90FD\u4F20\u5165",paraId:7,tocIndex:3},{value:"toastHandler",paraId:7,tocIndex:3},{value:"\uFF0C\u7EE7\u7EED\u5F80\u4E0B\u9605\u8BFB\u3010\u81EA\u5B9A\u4E49\u5B9E\u4F8B\u3011\u4E86\u89E3\u5982\u4F55\u5B9A\u5236\u5316\u4E00\u4E2A\u4E13\u5C5E",paraId:7,tocIndex:3},{value:"request",paraId:7,tocIndex:3},{value:"\u3002",paraId:7,tocIndex:3},{value:"\u6211\u4EEC\u7684",paraId:8,tocIndex:4},{value:"request",paraId:8,tocIndex:4},{value:"\u6709\u5927\u91CF\u9ED8\u8BA4\u503C\uFF0C\u4E00\u822C\u4E0D\u540C\u7684\u9879\u76EE\u90FD\u5E0C\u671B\u6309\u5DE5\u7A0B\u7EF4\u5EA6\u8986\u76D6\u4E00\u4E9B\u9ED8\u8BA4\u503C\uFF0C\u60A8\u53EF\u4EE5\u901A\u8FC7",paraId:8,tocIndex:4},{value:"request.create(options)",paraId:8,tocIndex:4},{value:"\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684request\u65B9\u6CD5\uFF0C\u7528\u6765\u8986\u76D6\u9ED8\u8BA4\u914D\u7F6E\uFF0C\u5F53\u7136\uFF0C\u65B0\u521B\u5EFA\u51FA\u6765\u7684",paraId:8,tocIndex:4},{value:"request",paraId:8,tocIndex:4},{value:"\u8FD8\u53EF\u4EE5\u7EE7\u7EED\u94FE\u5F0F\u8C03\u7528",paraId:8,tocIndex:4},{value:"create()",paraId:8,tocIndex:4},{value:"\u3002",paraId:8,tocIndex:4},{value:`import { request as rawRequest } from 'youtil';

// \u8BBE\u7F6E toastHandler \u9ED8\u8BA4\u503C
const request1 = rawRequest.create({
  toastHandler: (message) => Toast.show({ title: message, icon: 'error' })
});
// \u5728\u4E0A\u9762\u7684 request1 \u57FA\u7840\u4E4B\u4E0A\u7EE7\u7EED\u8BBE\u7F6E\u9ED8\u8BA4\u503C
const request2 = request1.create({
  baseUrl: 'http://xxx.com',
});
// \u6BCF\u4E2A\u8FD4\u56DE\u7684request\u90FD\u53EF\u4EE5\u7EE7\u7EEDcreate\uFF0C\u65B0\u7684\u914D\u7F6E\u4F1A\u548C\u65E7\u914D\u7F6E\u5408\u5E76
const request3 = request2.create({
  baseUrl: 'http://ooo.com',
});
`,paraId:9,tocIndex:4},{value:"\u63A5\u53E3\u8BF7\u6C42\u6709\u4E2A\u975E\u5E38\u666E\u904D\u7684\u8BC9\u6C42\uFF1A\u8BF7\u6C42\u5F00\u59CB\u663E\u793Aloading\uFF0C\u8BF7\u6C42\u7ED3\u675F\u65E0\u8BBA\u6210\u529F\u4E0E\u5426\u5173\u95EDloading\uFF0C\u4E3A\u65B9\u4FBF\u4F7F\u7528\uFF0C",paraId:10,tocIndex:5},{value:"request",paraId:10,tocIndex:5},{value:"\u5185\u7F6E\u4E86",paraId:10,tocIndex:5},{value:"setLoading",paraId:10,tocIndex:5},{value:"\u94A9\u5B50\uFF1A",paraId:10,tocIndex:5},{value:`const [loading, setLoading] = useState(false);
// \u8BF7\u6C42\u7ED3\u675F\u540E\uFF0C\u65E0\u8BBA\u6210\u529F\u8FD8\u662F\u5931\u8D25\uFF0CsetLoading(false) \u90FD\u4F1A\u88AB\u8C03\u7528
await request('xxx', { setLoading });
`,paraId:11,tocIndex:5},{value:"\u6211\u4EEC\u4F1A\u9ED8\u8BA4\u5047\u8BBE\u54CD\u5E94\u6EE1\u8DB3\u5982\u4E0B\u7ED3\u6784\uFF1A",paraId:12,tocIndex:7},{value:`export interface IResponse {
  /** \u662F\u5426\u6210\u529F */
  code: number;
  /** \u8FD4\u56DE\u7684\u5185\u5BB9 */
  data?: any;
  /** \u5F02\u5E38\u6587\u6848 */
  message?: string;
}
`,paraId:13,tocIndex:7},{value:"request",paraId:14,tocIndex:7},{value:"\u5E93\u5305\u542B\u4E86\u4E00\u4E9B\u9ED8\u8BA4\u903B\u8F91\uFF1A",paraId:14,tocIndex:7},{value:"\u5224\u65AD\u63A5\u53E3\u662F\u5426\u8C03\u7528\u6210\u529F\uFF0C\u9ED8\u8BA4\u89C4\u5219: ",paraId:15,tocIndex:7},{value:"resp?.code == 0 || resp?.code == 200",paraId:15,tocIndex:7},{value:"\uFF0C\u5982\u679C\u60A8\u7684\u63A5\u53E3\u4E0D\u6EE1\u8DB3\u6B64\u89C4\u5219\u53EF\u901A\u8FC7",paraId:15,tocIndex:7},{value:"checkSuccess(resp) => boolean",paraId:15,tocIndex:7},{value:"\u94A9\u5B50\u8FDB\u884C\u81EA\u5B9A\u4E49\uFF1B",paraId:15,tocIndex:7},{value:"\u5982\u679C\u8C03\u7528\u6210\u529F\uFF0C\u4F1A\u4EC5\u8FD4\u56DE",paraId:15,tocIndex:7},{value:"resp.data",paraId:15,tocIndex:7},{value:"\uFF0C\u6CE8\u610F\uFF0C\u4E0D\u662F\u8FD4\u56DE\u6574\u4E2A",paraId:15,tocIndex:7},{value:"resp",paraId:15,tocIndex:7},{value:"\uFF0C\u800C\u662F\u4EC5\u8FD4\u56DE",paraId:15,tocIndex:7},{value:"resp.data",paraId:15,tocIndex:7},{value:"\uFF1B",paraId:15,tocIndex:7},{value:"\u5982\u679C\u5931\u8D25\uFF0C\u9ED8\u8BA4\u4F1A",paraId:15,tocIndex:7},{value:"toast",paraId:15,tocIndex:7},{value:"\u5F02\u5E38\uFF0C\u5F02\u5E38\u6587\u6848\u53D6\u503C\u903B\u8F91\uFF1A",paraId:15,tocIndex:7},{value:"options.overrideMessage || resp.message || options.defaultErrorMessage",paraId:15,tocIndex:7},{value:"\uFF0C\u5176\u4E2D\uFF0C",paraId:15,tocIndex:7},{value:"overrideMessage",paraId:15,tocIndex:7},{value:"\u652F\u6301\u4F20\u5165\u51FD\u6570\uFF1B",paraId:15,tocIndex:7},{value:"\u9664\u4E86\u53EF\u4EE5\u7528",paraId:16,tocIndex:7},{value:"checkSuccess",paraId:16,tocIndex:7},{value:"\u5BF9\u6210\u529F\u5224\u65AD\u8FDB\u884C\u81EA\u5B9A\u4E49\u5916\uFF0C\u4F60\u8FD8\u53EF\u4EE5\u901A\u8FC7",paraId:16,tocIndex:7},{value:"responseConverter",paraId:16,tocIndex:7},{value:"\u8FDB\u884C\u66F4\u7075\u6D3B\u7684\u52A0\u5DE5\u5904\u7406\u4EE5\u6EE1\u8DB3\u4E0A\u8FF0\u7ED3\u6784\uFF1A",paraId:16,tocIndex:7},{value:`const responseConverter = resp => {
  if (resp) {
    resp.code = resp.success ? 0 : 500;
    resp.message = resp.msg;
  }
  return resp;
};
await request('xxx', { responseConverter });
`,paraId:17,tocIndex:7},{value:"\u5982\u679C\u4F60\u8BBE\u7F6E\u4E86",paraId:18,tocIndex:8},{value:"toastHandler",paraId:18,tocIndex:8},{value:"\uFF0C\u53D1\u751F\u5F02\u5E38\u65F6\u4F1A\u9ED8\u8BA4",paraId:18,tocIndex:8},{value:"toast(resp.message || options.defaultErrorMessage)",paraId:18,tocIndex:8},{value:"\u3002",paraId:18,tocIndex:8},{value:"\u5982\u679C\u67D0\u4E2A\u63A5\u53E3\u4F60\u5E0C\u671B\u5B8C\u5168\u81EA\u5B9A\u4E49\u5F02\u5E38\u6587\u6848\uFF08\u6BD4\u5982\u4E0D\u5E0C\u671B\u628A\u771F\u5B9E\u539F\u56E0\u544A\u77E5\u7528\u6237\uFF09\uFF0C\u53EF\u4EE5\u901A\u8FC7",paraId:19,tocIndex:9},{value:"overrideMessage",paraId:19,tocIndex:9},{value:"\u6765\u8986\u76D6\u9ED8\u8BA4\u5F02\u5E38\u6587\u6848(\u6B64\u65F6\u4F1A\u5B8C\u5168\u5FFD\u7565\u540E\u7AEF\u8FD4\u56DE\u7684",paraId:19,tocIndex:9},{value:"resp.message",paraId:19,tocIndex:9},{value:")\uFF1A",paraId:19,tocIndex:9},{value:`await request('xxx', { overrideMessage: '\u67E5\u8BE2\u6570\u636E\u5F02\u5E38' });
`,paraId:20,tocIndex:9},{value:"\u5F53\u7136\uFF0C\u4E5F\u652F\u6301\u6839\u636E",paraId:21,tocIndex:9},{value:"resp",paraId:21,tocIndex:9},{value:"\u53BB\u5B8C\u5168\u81EA\u5B9A\u4E49\u5F02\u5E38\u6587\u6848\uFF1A",paraId:21,tocIndex:9},{value:`const overrideMessage = resp => {
  if (resp.code === 10001) {
    return '\u60A8\u7684\u8D26\u53F7\u5F02\u5E38\uFF0C\u8BF7\u8054\u7CFB\u5BA2\u670D\u5904\u7406\uFF01';
  }
  return resp?.message === '\u7CFB\u7EDF\u7E41\u5FD9' ? '\u6D3B\u52A8\u592A\u706B\u7206\uFF0C\u7A0D\u540E\u518D\u8BD5\u5427' : resp?.message;
};
await request('xxx', { overrideMessage });
`,paraId:22,tocIndex:9},{value:"overrideMessage",paraId:23,tocIndex:10},{value:"\u4E00\u822C\u7528\u4E8E\u5177\u4F53\u67D0\u4E2A\u63A5\u53E3\u7684\u7279\u6B8A\u5904\u7406\uFF0C\u53E6\u5916\u8FD8\u6709\u4E00\u4E2A\u5168\u5C40\u7684\u515C\u5E95\u5F02\u5E38\u6587\u6848\uFF0C\u5F53\u540E\u7AEF\u6CA1\u6709\u8FD4\u56DE",paraId:23,tocIndex:10},{value:"resp.message",paraId:23,tocIndex:10},{value:"\u4F1A\u7528\u5230\uFF0C\u53EF\u4EE5\u901A\u8FC7",paraId:23,tocIndex:10},{value:"defaultErrorMessage",paraId:23,tocIndex:10},{value:"\u8FDB\u884C\u8BBE\u7F6E\u3002",paraId:23,tocIndex:10},{value:`import { request as rawRequest } from '@jdcc/utils';

const request = rawRequest.create({
  toastHandler: (message) => Toast.show({ title: message, icon: 'error' }),
  defaultErrorMessage: '\u6D3B\u52A8\u706B\u7206\uFF0C\u7A0D\u540E\u518D\u8BD5\u5427\uFF01',
});
`,paraId:24,tocIndex:10},{value:"\u6709\u4E9B\u65F6\u5019\u53EF\u80FD\u4E0D\u5173\u6CE8\u8BF7\u6C42\u5F02\u5E38\uFF0C\u671F\u671B\u53D1\u751F\u5F02\u5E38\u65F6\u4E0D\u544A\u77E5\u7528\u6237\uFF0C\u6B64\u65F6\u53EF\u4EE5\u8BBE\u7F6E",paraId:25,tocIndex:11},{value:"silent: true",paraId:25,tocIndex:11},{value:"\uFF08\u5176\u5B9E",paraId:25,tocIndex:11},{value:"overrideMessage: ''",paraId:25,tocIndex:11},{value:"\u4E5F\u53EF\u4EE5\u5B9E\u73B0\u7C7B\u4F3C\u8BC9\u6C42\uFF09\uFF1A",paraId:25,tocIndex:11},{value:`await request('xxx', { silent: true });
`,paraId:26,tocIndex:11},{value:"\u5982\u679C\u4F60\u8FD8\u6709\u66F4\u7075\u6D3B\u7684\u81EA\u5B9A\u4E49\u5F02\u5E38\u5904\u7406\u8BC9\u6C42\uFF0C\u6BD4\u5982\u67D0\u4E2A\u6587\u6848\u7528dialog\uFF0C\u67D0\u4E9B\u6587\u6848\u7528toast\uFF0C\u4EA6\u6216\u8005\u67D0\u4E9B\u5F02\u5E38\u9700\u8981\u8FDB\u884C\u767B\u5F55\u5904\u7406\uFF0C\u53EF\u4EE5\u7528",paraId:27,tocIndex:12},{value:"errorHandler",paraId:27,tocIndex:12},{value:"\u94A9\u5B50\uFF08\u4E00\u822C\u4E0D\u5EFA\u8BAE\u8BBE\u7F6E\uFF0C\u9664\u975E\u786E\u6709\u5FC5\u8981\uFF09\uFF1A",paraId:27,tocIndex:12},{value:`const errorHandler = (message: string, resp: any, options) => {
  if (resp?.code === '10002') {
    Dialog.alert({ title: '\u60A8\u8FD8\u6CA1\u6709\u767B\u5F55\uFF0C\u70B9\u51FB\u786E\u5B9A\u6309\u94AE\u53BB\u767B\u5F55\uFF01' });
  } else if (!options?.silent) {
    // \u4E0D\u8981\u6F0F\u4E86 options?.silent \u5224\u65AD\uFF0C\u5426\u5219 silent \u914D\u7F6E\u65E0\u6CD5\u751F\u6548
    Toast.show({ title: message, icon: 'error' });
  }
  // \u629B\u51FA\u5F02\u5E38\uFF0C\u963B\u6B62\u6267\u884C\u4E4B\u540E\u7684\u64CD\u4F5C\uFF0C\u8FD9\u884C\u4EE3\u7801\u5343\u4E07\u4E0D\u8981\u6F0F\u4E86\uFF01
  throw new Error(message);
}
await request('xxx', { errorHandler });
`,paraId:28,tocIndex:12},{value:`setLoading(true);
const baseUrl= '//xxx.jd.com';
await request('xxx', { baseUrl });
`,paraId:29,tocIndex:13},{value:`setLoading(true);
const axiosOptions = {
  timeout: 30000,
};
await request('xxx', { axiosOptions });
`,paraId:30,tocIndex:14},{value:"\u5F02\u5E38\u4E2D\u65AD\u6267\u884C\u662F\u901A\u8FC7",paraId:31,tocIndex:15},{value:"errorHandler",paraId:31,tocIndex:15},{value:"\u4E2D\u7684",paraId:31,tocIndex:15},{value:"throw new Error",paraId:31,tocIndex:15},{value:"\u5B9E\u73B0\u7684\uFF1A",paraId:31,tocIndex:15},{value:`await request('xxx');
console.log('\u5982\u679C\u53D1\u751F\u5F02\u5E38\uFF0C\u8FD9\u6761console.log\u4E0D\u4F1A\u6267\u884C');
`,paraId:32,tocIndex:15},{value:"\u8FD9\u79CD\u60C5\u51B5\u4E0B\u63A7\u5236\u53F0\u4F1A\u4EA7\u751F\u4E00\u6761\u672A\u5904\u7406\u7684\u5F02\u5E38\u65E5\u5FD7\uFF0C\u5982\u679C\u786E\u5B9E\u6709\u5F3A\u8FEB\u75C7\u4E0D\u559C\u6B22\u8FD9\u79CD\u6A21\u5F0F\uFF0C",paraId:33,tocIndex:15},{value:"request",paraId:33,tocIndex:15},{value:"\u4E5F\u662F\u652F\u6301",paraId:33,tocIndex:15},{value:"try-catch",paraId:33,tocIndex:15},{value:"\u7684\uFF1A",paraId:33,tocIndex:15},{value:`try {
  await request('xxx');
} catch (e) {
}
console.log('\u5982\u679C\u53D1\u751F\u5F02\u5E38\uFF0C\u8FD9\u6761console.log\u4ECD\u7136\u4F1A\u6267\u884C');
`,paraId:34,tocIndex:15},{value:"\u4F20\u5165",paraId:35,tocIndex:17},{value:"params",paraId:35,tocIndex:17},{value:"\u53C2\u6570\u4F1A\u9ED8\u8BA4\u6309\u7167",paraId:35,tocIndex:17},{value:"GET",paraId:35,tocIndex:17},{value:"\u5904\u7406\uFF1A",paraId:35,tocIndex:17},{value:`const params = {};
await request('xxx', { params });
`,paraId:36,tocIndex:17},{value:"\u4F20\u5165",paraId:37,tocIndex:18},{value:"data",paraId:37,tocIndex:18},{value:"\u53C2\u6570\u4F1A\u9ED8\u8BA4\u6309\u7167",paraId:37,tocIndex:18},{value:"POST",paraId:37,tocIndex:18},{value:"\u5904\u7406\uFF1A",paraId:37,tocIndex:18},{value:`const data = {};
await request('xxx', { data });
`,paraId:38,tocIndex:18},{value:"\u4F20\u5165",paraId:39,tocIndex:19},{value:"json",paraId:39,tocIndex:19},{value:"\u53C2\u6570\u4F1A\u9ED8\u8BA4\u6309\u7167",paraId:39,tocIndex:19},{value:"postJson",paraId:39,tocIndex:19},{value:"\u6A21\u5F0F\u5904\u7406\uFF1A",paraId:39,tocIndex:19},{value:"\u6240\u8C13",paraId:40,tocIndex:19},{value:"postJson",paraId:40,tocIndex:19},{value:"\u6A21\u5F0F\uFF1A",paraId:40,tocIndex:19},{value:"POST",paraId:40,tocIndex:19},{value:" + ",paraId:40,tocIndex:19},{value:"Content-Type: 'application/json'",paraId:40,tocIndex:19},{value:"\uFF1A",paraId:40,tocIndex:19},{value:`const json = {};
await request('xxx', { json });
`,paraId:41,tocIndex:19},{value:"\u901A\u8FC7",paraId:42,tocIndex:20},{value:"formData",paraId:42,tocIndex:20},{value:"\u53EF\u4EE5\u4F20\u4E00\u4E9B\u4E8C\u8FDB\u5236\u6D41\uFF0C\u6BD4\u5982\u6587\u4EF6\uFF08\u6CE8\u610F\u6D4F\u89C8\u5668\u4F1A\u81EA\u52A8\u8BBE\u7F6E",paraId:42,tocIndex:20},{value:"content-type: multipart/form-data",paraId:42,tocIndex:20},{value:"\uFF0C\u60A8\u65E0\u9700\u624B\u52A8\u8BBE\u7F6E\uFF09\uFF1A",paraId:42,tocIndex:20},{value:`const formData = {
  file: SomeFile,
};
await request('xxx', { formData });
`,paraId:43,tocIndex:20},{value:`await request('xxx', { headers: { 'x-test': '123' } });
`,paraId:44,tocIndex:21},{value:"\u901A\u8FC7",paraId:45,tocIndex:23},{value:"mockRequest(url, ({ url, params, method }) => resp)",paraId:45,tocIndex:23},{value:"\u53EF\u4EE5\u5B9E\u73B0\u517C\u5BB9\u6027\u826F\u597D\u7684",paraId:45,tocIndex:23},{value:"mock",paraId:45,tocIndex:23},{value:"\u529F\u80FD\uFF0C\u65E0\u8BBA\u662F",paraId:45,tocIndex:23},{value:"xhr",paraId:45,tocIndex:23},{value:"\u8FD8\u662F",paraId:45,tocIndex:23},{value:"fetch",paraId:45,tocIndex:23},{value:"\u90FD\u80FD\u517C\u5BB9\uFF0C\u7531\u4E8E\u4E0D\u4F1A\u5BF9",paraId:45,tocIndex:23},{value:"xhr",paraId:45,tocIndex:23},{value:"\u6216",paraId:45,tocIndex:23},{value:"fetch",paraId:45,tocIndex:23},{value:"\u8FDB\u884C\u91CD\u5199\uFF0C\u6240\u4EE5\u5373\u4F7F\u53D1\u5E03\u5230\u751F\u4EA7\u73AF\u5883\u5173\u7CFB\u4E5F\u4E0D\u5927\u3002",paraId:45,tocIndex:23},{value:"\u6CE8\u610F\uFF0C\u56DE\u8C03\u4E2D\u7684",paraId:46,tocIndex:23},{value:"params",paraId:46,tocIndex:23},{value:"\u5DF2\u7ECF\u8FC7\u7279\u6B8A\u5904\u7406\uFF0C\u65E0\u8BBA\u662F",paraId:46,tocIndex:23},{value:"get",paraId:46,tocIndex:23},{value:"\u8FD8\u662F",paraId:46,tocIndex:23},{value:"post",paraId:46,tocIndex:23},{value:"\u8FD8\u662F",paraId:46,tocIndex:23},{value:"postJson",paraId:46,tocIndex:23},{value:"\u90FD\u4F1A\u628A\u53C2\u6570\u6B63\u786E\u89E3\u6790\u5230",paraId:46,tocIndex:23},{value:"params",paraId:46,tocIndex:23},{value:"\u4E2D\u3002",paraId:46,tocIndex:23}]}}]);
