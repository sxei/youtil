import{_ as e,a as n,b as t,c as o}from"./53aa46fe.esm.es5.production.js";var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"请稍候",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=(t=Object.assign({},{hasMask:!0,maskColor:"transparent",onCancel:null,cancelInline:!1,id:"com_global_page_loading"},t)).id,r="_".concat(o,"_timeout");window[r]&&clearTimeout(window[r]);var c=document.getElementById(o);c||((c=document.createElement("div")).id=o,c.className=o,document.body.append(c));var i="".concat(o,"_style");if(!document.getElementById(i)){var s=document.createElement("style");s.id=i,s.innerHTML="\n        .".concat(o," {\n            position: fixed;\n            top: calc(50vh - 60px);\n            left: calc(50vw - 60px);\n            width: 120px;\n            height: 120px;\n            z-index: 8000;\n            background: rgba(0, 0, 0, 0.6);\n            border-radius: 8px;\n            text-align: center;\n            color: white;\n            padding-top: 20px;\n        }\n        .").concat(o," img {\n            width: 50px;\n            margin-bottom: 10px;\n        }"),document.head.appendChild(s)}if(c.innerHTML="\n        ".concat(t.hasMask?'<div class="mask-wrapper" style="background-color: '.concat(t.maskColor,'"></div>'):"",'\n        <div class="loading-wrapper">\n            <div class="loading-content">\n                <img src="https://img.alicdn.com/tfs/TB1bnUsQBLoK1RjSZFuXXXn0XXa-32-32.svg" alt="加载中">\n                <div>').concat(e).concat(t.cancelInline?" ":"</div>","\n                ").concat(t.onCancel?'<a href="javascript:;" class="cancel">取消</a>':"","\n                ").concat(t.cancelInline?"</div>":"","\n            </div>\n        </div>"),t.onCancel){var l=c.querySelector(".cancel");l&&l.addEventListener("click",function(){a(),t.onCancel()})}c.style.display="block",n>0&&(window[r]=setTimeout(function(){a()},1e3*n))},a=function(){var e=document.getElementById("com_global_page_loading");e&&(e.style.display="none")},c=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.search;return(RegExp("(^|\\?|&)".concat(e,"=(.*?)(?=&|#|$)"),"g").exec(n)||[])[2]},i=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.search;return parseInt(c(e,n)||"0",10)},s=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.search,t=((n||"").split("?").pop()||"").split("#")[0]||"",o={};return t.split("&").map(function(e){return e.split("=")}).forEach(function(n){var t=e(n,2),r=t[0],a=t[1];o[r]=a||""}),o},l=function(n,t,o){if(void 0!==c(n,o=o||"".concat(location.pathname).concat(location.search)))return o.replace(RegExp("(^|\\?|&)".concat(n,"=(.*?)(?=&|#|$)"),"g"),"$1".concat(n,"=").concat(t));var r=e(o.split("#"),2),a=r[0],i=r[1];return"".concat(a).concat(0>a.indexOf("?")?"?":"&").concat(n,"=").concat(t).concat(i?"#":"").concat(i||"")},d=function(e,n){return(n=n||"".concat(location.pathname).concat(location.search)).replace(RegExp("(^|\\?|&)".concat(e,"=.*?(&|#|$)"),"g"),function(e,n,t){return"&"===t?n:t})},u=function(e){return Object.keys(e||{}).filter(function(n){return void 0!==e[n]}).map(function(n){var t="object"==typeof e[n]?JSON.stringify(e[n]):e[n];return"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(t))}).join("&")},f=function(){var e=t(function(e,t){var r,a,c,i,s,l,d,f,p,m,g,h,v,y,b;return o(this,function(o){switch(o.label){case 0:(t=Object.assign({},{errorMessage:"系统繁忙，请稍后再试",errorHandler:function(e){if(!(null==t?void 0:t.silent)){var n;null==t||null===(n=t.toastHandler)||void 0===n||n.call(t,e)}throw Error(e)},baseUrl:"",headers:{},fetchOptions:{credentials:"include"},checkSuccess:function(e){return(null==e?void 0:e.code)==0||(null==e?void 0:e.code)==200},toastHandler:function(e){return console.error("[您还没有配置toastHandler，请根据您的UI组件库配置合适的提示方法] ".concat(e||""))}},t||{})).fetchOptions=n({},t.fetchOptions||{}),a=(r=t||{}).params,c=r.data,i=r.json,s=r.method,l=r.headers,d=r.baseUrl,f=r.fetchOptions,p=r.checkSuccess,m=r.afterRequest,g=r.errorHandler,h=r.errorMessage,v=r.responseConverter,f.headers=n({},f.headers||{},l||{}),a&&(f.method=s||"GET",e="".concat(e).concat(e.indexOf("?")>=0?"&":"?").concat(u(a))),c?Object.assign(f,{method:s||"POST",body:u(c),headers:n({"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"},f.headers||{})}):i&&Object.assign(f,{method:s||"POST",body:JSON.stringify(i),headers:n({"Content-Type":"application/json;charset=utf-8"},f.headers||{})}),y=null,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch("".concat(d||"").concat(e),f).then(function(e){return e.json()})];case 2:return y=o.sent(),[3,4];case 3:return console.error(b=o.sent()),null==m||m(!1,{message:null==b?void 0:b.message}),null==g||g(h||""),[2,void 0];case 4:if(y=v?v(y):y,null==p?void 0:p(y))return null==m||m(!0,y),[2,y.data];return null==m||m(!1,y),null==g||g(y.message||y.msg||h||"",y),[2,void 0]}})});return function(n,t){return e.apply(this,arguments)}}(),p=function(e,t){var o=t;return t||(o=e,e=f),function(t,r){return e(t,n({},o||{},r||{}))}},m=function(e,n){var t=function(e){n=n.replace(RegExp("".concat(e,"+"),"g"),function(n){var t="".concat(o[e]);if("w"===e)return(n.length>2?"星期":"周")+r[t];for(var a=0,c=t.length;a<n.length-c;a++)t="0".concat(t);return 1===n.length?t:t.substring(t.length-n.length)})};if(!e)return"";if("number"==typeof e)e=new Date(e);else if("string"==typeof e){if(/^\d{12,13}$/g.test(e))e=new Date(parseInt(e,10));else{if(!/^.{10}T.{8,12}Z?$/g.test(e))return e;e=new Date(e)}}if(!(e instanceof Date))throw Error("formatDate error: not date.");if(isNaN(null==e?void 0:e.getFullYear()))throw Error("formatDate error: invalid date.");n=n||"yyyy-MM-dd HH:mm:ss";var o={y:e.getFullYear(),M:e.getMonth()+1,d:e.getDate(),q:Math.floor((e.getMonth()+3)/3),w:e.getDay(),H:e.getHours(),h:e.getHours()%12==0?12:e.getHours()%12,m:e.getMinutes(),s:e.getSeconds(),S:e.getMilliseconds()},r=["天","一","二","三","四","五","六"];for(var a in o)t(a);return n},g=function(e,n){var t={y:0,M:1,d:0,H:0,h:0,m:0,s:0,S:0};(n=n||"yyyy-MM-dd").replace(/([^yMdHmsS]*?)(([yMdHmsS])\3*)([^yMdHmsS]*?)/g,function(n,o,r,a,c){return e=e.replace(RegExp("".concat(o,"(\\d{").concat(r.length,"})").concat(c)),function(e,n){return t[a]=parseInt(n),""}),""}),t.M--;var o=new Date(t.y,t.M,t.d,t.H,t.m,t.s);return 0!==t.S&&o.setMilliseconds(t.S),o},h=function(e){return new Promise(function(n){return setTimeout(n,e||0)})},v=function(e){return e&&"object"==typeof e?JSON.parse(JSON.stringify(e)):e},y=function(e){if("string"==typeof e){var n=document.createElement("div");return n.innerText=e,n.innerHTML}if("object"==typeof e&&e)for(var t in e)e[t]=y(e[t]);return e},b=function(e){if("string"==typeof e){var n=document.createElement("div");return n.innerHTML=e,n.innerText}if("object"==typeof e&&e)for(var t in e)e[t]=b(e[t]);return e},w=function(e,n,t){if(!e)throw Error("text can not be empty.");return(n=n||function(e){return console.error("复制到剪贴板失败：".concat(e||""))},navigator.clipboard&&!t)?navigator.clipboard.writeText(e).catch(function(e){throw n(e.message),e}):new Promise(function(t,o){var r=document.createElement("input");r.value=e,r.style.cssText="position:fixed;left:0;top:0;opacity:0;",document.body.appendChild(r),r.select();try{if(document.execCommand("copy"))t();else{var a="Failed to execute 'document.execCommand'.";n(a),o(Error(a))}}catch(e){n(e.message),o(e)}finally{document.body.removeChild(r)}})};export{p as Request,w as copyToClipboard,b as decodeHtml,v as deepCopy,d as delParam,y as encodeHtml,m as formatDate,c as getParam,i as getParamInt,s as getParams,a as hideLoading,g as parseDate,f as request,l as setParam,r as showLoading,h as sleep,u as toUrlParams};
