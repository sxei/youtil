!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).youtil={})}(this,function(e){"use strict";var t,n,r=function(){var e=document.getElementById("com_global_page_loading");e&&(e.style.display="none")};function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.search;return(RegExp("(^|\\?|&)".concat(e,"=(.*?)(?=&|#|$)"),"g").exec(t)||[])[2]},i=function(e){return Object.keys(e||{}).filter(function(t){return void 0!==e[t]}).map(function(t){var n="object"==typeof e[t]?JSON.stringify(e[t]):e[t];return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n))}).join("&")};function s(e,t,n,r,o,a,c){try{var i=e[a](c),s=i.value}catch(e){n(e);return}i.done?t(s):Promise.resolve(s).then(r,o)}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r,o;r=e,o=n[t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})}return e}"function"==typeof SuppressedError&&SuppressedError;var u=(t=function(e,t){var n,r,o,a,c,s,u,d,f,p,m,h,g,y,v,b,w,x,O;return function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=i(0),c.throw=i(1),c.return=i(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function i(i){return function(s){return function(i){if(n)throw TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,function(S){switch(S.label){case 0:if((t=Object.assign({},{errorMessage:"系统繁忙，请稍后再试",errorHandler:function(e){if(!(null==t?void 0:t.silent)){var n;null==t||null===(n=t.toastHandler)||void 0===n||n.call(t,e)}throw Error(e)},baseUrl:"",headers:{},fetchOptions:{credentials:"include"},checkSuccess:function(e){return(null==e?void 0:e.code)==0||(null==e?void 0:e.code)==200},toastHandler:function(e){return console.error("[您还没有配置toastHandler，请根据您的UI组件库配置合适的提示方法] ".concat(e||""))},onFetchResponse:function(e){if(200===e.status)return e.json();var t={code:e.status,status:e.status,message:e.statusText,headers:e.headers,_response:e},n=Error(t.message);throw n.response=t,n}},t||{})).fetchOptions=l({},t.fetchOptions||{}),r=(n=t||{}).params,o=n.data,a=n.formData,c=n.json,s=n.method,u=n.headers,d=n.baseUrl,f=n.fetchOptions,p=n.checkSuccess,m=n.afterRequest,h=n.errorHandler,g=n.errorMessage,y=n.responseConverter,v=n.onFetchResponse,f.headers=l({},u||{},f.headers||{}),r&&(f.method=s||"GET",e="".concat(e).concat(e.indexOf("?")>=0?"&":"?").concat(i(r))),o)Object.assign(f,{method:s||"POST",body:i(o),headers:l({"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"},f.headers||{})});else if(a){if(b=a,!(a instanceof FormData))for(var j in b=new FormData,a)b.append(j,a[j]);Object.assign(f,{method:s||"POST",body:b})}else c&&Object.assign(f,{method:s||"POST",body:JSON.stringify(c),headers:l({"Content-Type":"application/json;charset=utf-8"},f.headers||{})});w=null,S.label=1;case 1:return S.trys.push([1,3,,4]),[4,fetch("".concat(d||"").concat(e),f).then(v)];case 2:return w=S.sent(),[3,4];case 3:return console.error(x=S.sent()),null==m||m(!1,{message:null==x?void 0:x.message}),null==h||h((null===(O=x.response)||void 0===O?void 0:O.message)||g||"",x.response),[2,void 0];case 4:if(w=y?y(w):w,null==p?void 0:p(w))return null==m||m(!0,w),[2,w.data];return null==m||m(!1,w),null==h||h(w.message||w.msg||g||"",w),[2,void 0]}})},n=function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function c(e){s(a,r,o,c,i,"next",e)}function i(e){s(a,r,o,c,i,"throw",e)}c(void 0)})},function(e,t){return n.apply(this,arguments)}),d=function(e){if("string"==typeof e){var t=document.createElement("div");return t.innerText=e,t.innerHTML}if("object"==typeof e&&e)for(var n in e)e[n]=d(e[n]);return e},f=function(e){if("string"==typeof e){var t=document.createElement("div");return t.innerHTML=e,t.innerText}if("object"==typeof e&&e)for(var n in e)e[n]=f(e[n]);return e};e.Request=function(e,t){var n=t;return t||(n=e,e=u),function(t,r){return e(t,l({},n||{},r||{}))}},e.copyToClipboard=function(e,t,n){if(!e)throw Error("text can not be empty.");return(t=t||function(e){return console.error("复制到剪贴板失败：".concat(e||""))},navigator.clipboard&&!n)?navigator.clipboard.writeText(e).catch(function(e){throw t(e.message),e}):new Promise(function(n,r){var o=document.createElement("input");o.value=e,o.style.cssText="position:fixed;left:0;top:0;opacity:0;",document.body.appendChild(o),o.select();try{if(document.execCommand("copy"))n();else{var a="Failed to execute 'document.execCommand'.";t(a),r(Error(a))}}catch(e){t(e.message),r(e)}finally{document.body.removeChild(o)}})},e.decodeHtml=f,e.deepCopy=function(e){return e&&"object"==typeof e?JSON.parse(JSON.stringify(e)):e},e.delParam=function(e,t){return(t=t||"".concat(location.pathname).concat(location.search)).replace(RegExp("(^|\\?|&)".concat(e,"=.*?(&|#|$)"),"g"),function(e,t,n){return"&"===n?t:n})},e.encodeHtml=d,e.formatDate=function(e,t){var n=function(e){t=t.replace(RegExp("".concat(e,"+"),"g"),function(t){var n="".concat(r[e]);if("w"===e)return(t.length>2?"星期":"周")+o[n];for(var a=0,c=n.length;a<t.length-c;a++)n="0".concat(n);return 1===t.length?n:n.substring(n.length-t.length)})};if(!e)return"";if("number"==typeof e)e=new Date(e);else if("string"==typeof e){if(/^\d{12,13}$/g.test(e))e=new Date(parseInt(e,10));else{if(!/^.{10}T.{8,12}Z?$/g.test(e))return e;e=new Date(e)}}if(!(e instanceof Date))throw Error("formatDate error: not date.");if(isNaN(null==e?void 0:e.getFullYear()))throw Error("formatDate error: invalid date.");t=t||"yyyy-MM-dd HH:mm:ss";var r={y:e.getFullYear(),M:e.getMonth()+1,d:e.getDate(),q:Math.floor((e.getMonth()+3)/3),w:e.getDay(),H:e.getHours(),h:e.getHours()%12==0?12:e.getHours()%12,m:e.getMinutes(),s:e.getSeconds(),S:e.getMilliseconds()},o=["天","一","二","三","四","五","六"];for(var a in r)n(a);return t},e.getParam=c,e.getParamInt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.search;return parseInt(c(e,t)||"0",10)},e.getParams=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.search,t=((e||"").split("?").pop()||"").split("#")[0]||"",n={};return t.split("&").map(function(e){return e.split("=")}).forEach(function(e){var t=a(e,2),r=t[0],o=t[1];n[r]=o||""}),n},e.hideLoading=r,e.parseDate=function(e,t){var n={y:0,M:1,d:0,H:0,h:0,m:0,s:0,S:0};(t=t||"yyyy-MM-dd").replace(/([^yMdHmsS]*?)(([yMdHmsS])\3*)([^yMdHmsS]*?)/g,function(t,r,o,a,c){return e=e.replace(RegExp("".concat(r,"(\\d{").concat(o.length,"})").concat(c)),function(e,t){return n[a]=parseInt(t),""}),""}),n.M--;var r=new Date(n.y,n.M,n.d,n.H,n.m,n.s);return 0!==n.S&&r.setMilliseconds(n.S),r},e.request=u,e.setParam=function(e,t,n){if(void 0!==c(e,n=n||"".concat(location.pathname).concat(location.search)))return n.replace(RegExp("(^|\\?|&)".concat(e,"=(.*?)(?=&|#|$)"),"g"),"$1".concat(e,"=").concat(t));var r=a(n.split("#"),2),o=r[0],i=r[1];return"".concat(o).concat(0>o.indexOf("?")?"?":"&").concat(e,"=").concat(t).concat(i?"#":"").concat(i||"")},e.showLoading=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"请稍候",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=(n=Object.assign({},{hasMask:!0,maskColor:"transparent",onCancel:null,cancelInline:!1,id:"com_global_page_loading"},n)).id,a="_".concat(o,"_timeout");window[a]&&clearTimeout(window[a]);var c=document.getElementById(o);c||((c=document.createElement("div")).id=o,c.className=o,document.body.append(c));var i="".concat(o,"_style");if(!document.getElementById(i)){var s=document.createElement("style");s.id=i,s.innerHTML="\n        .".concat(o," {\n            position: fixed;\n            top: calc(50vh - 60px);\n            left: calc(50vw - 60px);\n            width: 120px;\n            height: 120px;\n            z-index: 8000;\n            background: rgba(0, 0, 0, 0.6);\n            border-radius: 8px;\n            text-align: center;\n            color: white;\n            padding-top: 20px;\n        }\n        .").concat(o," img {\n            width: 50px;\n            margin-bottom: 10px;\n        }"),document.head.appendChild(s)}if(c.innerHTML="\n        ".concat(n.hasMask?'<div class="mask-wrapper" style="background-color: '.concat(n.maskColor,'"></div>'):"",'\n        <div class="loading-wrapper">\n            <div class="loading-content">\n                <img src="https://img.alicdn.com/tfs/TB1bnUsQBLoK1RjSZFuXXXn0XXa-32-32.svg" alt="加载中">\n                <div>').concat(e).concat(n.cancelInline?" ":"</div>","\n                ").concat(n.onCancel?'<a href="javascript:;" class="cancel">取消</a>':"","\n                ").concat(n.cancelInline?"</div>":"","\n            </div>\n        </div>"),n.onCancel){var l=c.querySelector(".cancel");l&&l.addEventListener("click",function(){r(),n.onCancel()})}c.style.display="block",t>0&&(window[a]=setTimeout(function(){r()},1e3*t))},e.sleep=function(e){return new Promise(function(t){return setTimeout(t,e||0)})},e.toUrlParams=i,Object.defineProperty(e,"__esModule",{value:!0})});
